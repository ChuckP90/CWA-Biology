<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CWA-Biology - Secondary School Biology Platform</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Custom styles */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hover-scale {
            transition: transform 0.2s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .btn-primary {
            background: linear-gradient(to right, #059669, #2563eb);
        }
        
        .btn-primary:hover {
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            border: 2px solid #059669;
            color: #059669;
        }
        
        .btn-secondary:hover {
            background-color: #059669;
            color: white;
        }
        
        .btn-outline {
            border: 2px solid #2563eb;
            color: #2563eb;
        }
        
        .btn-outline:hover {
            background-color: #2563eb;
            color: white;
        }
        
        .nav-link {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .active {
            background: rgba(255, 255, 255, 0.4) !important;
            transform: translateY(-2px) !important;
        }
        
        .admin-button {
            background: linear-gradient(to right, #7c3aed, #dc2626);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .admin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 234, 0.3);
        }
        
        /* Make sure all buttons are clickable */
        button, .clickable {
            cursor: pointer;
        }
        
        /* Add proper styling for admin buttons */
        .admin-tab-button {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            margin: 0 0.5rem;
        }
        
        .admin-tab-button.active {
            background: rgba(255, 255, 255, 0.4) !important;
            transform: translateY(-2px) !important;
        }
        
        .admin-action-button {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .edit-btn {
            background-color: #3b82f6;
            color: white;
        }
        
        .delete-btn {
            background-color: #ef4444;
            color: white;
        }
        
        .add-btn {
            background-color: #10b981;
            color: white;
        }
        
        /* Worksheet buttons */
        .worksheet-download-btn {
            background-color: #10b981;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .worksheet-download-btn:hover {
            background-color: #059669;
        }
        
        /* Quiz buttons */
        .quiz-btn {
            background: linear-gradient(to right, #ec4899, #8b5cf6);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .quiz-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(236, 72, 153, 0.3);
        }
        
        /* Class buttons */
        .class-action-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .material-btn {
            background-color: #3b82f6;
            color: white;
        }
        
        .announcement-btn {
            background-color: #8b5cf6;
            color: white;
        }
        
        /* Video and article buttons */
        .media-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .video-btn {
            background-color: #3b82f6;
            color: white;
        }
        
        .article-btn {
            background-color: #10b981;
            color: white;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            max-width: 700px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s ease-out;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
        }
        
        .close-modal:hover {
            background-color: #f3f4f6;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #1f2937;
        }
        
        .form-control {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 1rem;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-control-file {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            background-color: #f9fafb;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }
        
        .btn-modal {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-primary-modal {
            background-color: #059669;
            color: white;
        }
        
        .btn-primary-modal:hover {
            background-color: #047857;
        }
        
        .btn-secondary-modal {
            background-color: #6b7280;
            color: white;
        }
        
        .btn-secondary-modal:hover {
            background-color: #4b5563;
        }
        
        /* Quiz modal */
        .quiz-container {
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .question {
            margin-bottom: 1.5rem;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
        }
        
        .options {
            margin-top: 1rem;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            cursor: pointer;
        }
        
        .option:hover {
            background-color: #f9fafb;
        }
        
        .option.selected {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }
        
        .option input {
            margin-right: 0.5rem;
        }
        
        /* Tabs for admin content management */
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 1rem;
        }
        
        .admin-tab {
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .admin-tab.active {
            border-bottom-color: #059669;
            color: #059669;
            font-weight: 600;
        }
        
        /* Content list */
        .content-list {
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .content-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            margin-bottom: 0.5rem;
        }
        
        .content-item:hover {
            background-color: #f9fafb;
        }
        
        .content-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        /* Quiz editor */
        .quiz-editor {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
        }
        
        .question-editor {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
        }
        
        .option-editor {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .option-editor input[type="radio"] {
            margin-right: 0.5rem;
        }
        
        .add-question-btn {
            background-color: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
            cursor: pointer;
        }
        
        .add-option-btn {
            background-color: #3b82f6;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            margin-left: 0.5rem;
            cursor: pointer;
        }
        
        .remove-btn {
            background-color: #ef4444;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
        }
        
        /* Image gallery styles */
        .image-gallery {
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
            height: 400px;
            margin-top: 2rem;
            background-color: #f0f9ff;
        }
        
        .gallery-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            border-radius: 0.5rem;
        }
        
        .gallery-slide.active {
            opacity: 1;
        }
        
        .gallery-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }
        
        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .indicator.active {
            background-color: white;
            transform: scale(1.2);
        }
        
        /* Navigation arrows */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        .nav-arrow:hover {
            background-color: rgba(255, 255, 255, 1);
            transform: translateY(-50%) scale(1.1);
        }
        
        .nav-arrow.left {
            left: 20px;
        }
        
        .nav-arrow.right {
            right: 20px;
        }
        
        /* Footer styles */
        .footer-contact {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .contact-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        /* Back button */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .back-button svg {
            width: 24px;
            height: 24px;
            fill: #059669;
        }
        
        /* Menu button */
        .menu-button {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        .menu-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .menu-button svg {
            width: 24px;
            height: 24px;
            fill: #059669;
        }
        
        /* Menu overlay */
        .menu-overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 300px;
            height: 100vh;
            background-color: white;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 101;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            padding: 2rem;
        }
        
        .menu-overlay.active {
            transform: translateX(0);
        }
        
        .menu-item {
            padding: 1rem 0;
            border-bottom: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .menu-item:hover {
            color: #059669;
            transform: translateX(5px);
        }
        
        .menu-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans min-h-screen">
    <div id="app"></div>
    
    <!-- Modals -->
    <div id="editUnitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Edit Unit</h2>
                <button class="close-modal" onclick="app.closeModal('editUnitModal')">&times;</button>
            </div>
            <form id="editUnitForm">
                <div class="form-group">
                    <label for="editUnitTitle">Unit Title</label>
                    <input type="text" id="editUnitTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="editUnitDescription">Description</label>
                    <textarea id="editUnitDescription" class="form-control" rows="3" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('editUnitModal')">Cancel</button>
                    <button type="submit" class="btn-modal btn-primary-modal">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="addUnitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Unit</h2>
                <button class="close-modal" onclick="app.closeModal('addUnitModal')">&times;</button>
            </div>
            <form id="addUnitForm">
                <div class="form-group">
                    <label for="addUnitTitle">Unit Title</label>
                    <input type="text" id="addUnitTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="addUnitDescription">Description</label>
                    <textarea id="addUnitDescription" class="form-control" rows="3" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('addUnitModal')">Cancel</button>
                    <button type="submit" class="btn-modal btn-primary-modal">Add Unit</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="quizModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Quiz</h2>
                <button class="close-modal" onclick="app.closeModal('quizModal')">&times;</button>
            </div>
            <div id="quizContainer" class="quiz-container">
                <!-- Quiz content will be inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('quizModal')">Close</button>
                <button type="button" id="submitQuizBtn" class="btn-modal btn-primary-modal" onclick="app.submitQuiz()">Submit Quiz</button>
            </div>
        </div>
    </div>
    
    <div id="worksheetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Download Worksheet</h2>
                <button class="close-modal" onclick="app.closeModal('worksheetModal')">&times;</button>
            </div>
            <div class="text-center py-8">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </div>
                <p class="text-lg mb-4">Your worksheet is ready to download!</p>
                <button onclick="app.confirmDownload()" class="btn-primary text-white px-6 py-2 rounded-lg font-semibold">
                    Download Now
                </button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('worksheetModal')">Cancel</button>
            </div>
        </div>
    </div>
    
    <div id="classMaterialsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Class Materials</h2>
                <button class="close-modal" onclick="app.closeModal('classMaterialsModal')">&times;</button>
            </div>
            <div class="p-4">
                <p class="mb-4">Here are the materials for your class:</p>
                <ul id="materialsList" class="space-y-2">
                    <!-- Materials will be listed here -->
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('classMaterialsModal')">Close</button>
            </div>
        </div>
    </div>
    
    <div id="announcementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Class Announcements</h2>
                <button class="close-modal" onclick="app.closeModal('announcementModal')">&times;</button>
            </div>
            <div class="p-4">
                <p class="mb-4">Latest announcements for your class:</p>
                <div id="announcementsList" class="space-y-4">
                    <!-- Announcements will be listed here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('announcementModal')">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Admin Content Management Modal -->
    <div id="contentManagementModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 class="modal-title">Content Management</h2>
                <button class="close-modal" onclick="app.closeModal('contentManagementModal')">&times;</button>
            </div>
            <div class="p-4">
                <div class="admin-tabs">
                    <div class="admin-tab active" onclick="app.switchContentTab('videos')">Videos</div>
                    <div class="admin-tab" onclick="app.switchContentTab('articles')">Articles</div>
                    <div class="admin-tab" onclick="app.switchContentTab('worksheets')">Worksheets</div>
                    <div class="admin-tab" onclick="app.switchContentTab('quizzes')">Quizzes</div>
                </div>
                
                <div id="contentTabContent">
                    <!-- Content will be loaded here based on active tab -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('contentManagementModal')">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Add/Edit Video Modal -->
    <div id="videoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="videoModalTitle">Add Video</h2>
                <button class="close-modal" onclick="app.closeModal('videoModal')">&times;</button>
            </div>
            <form id="videoForm">
                <input type="hidden" id="videoUnitId">
                <input type="hidden" id="videoId">
                <div class="form-group">
                    <label for="videoTitle">Video Title</label>
                    <input type="text" id="videoTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="videoUrl">Video URL</label>
                    <input type="url" id="videoUrl" class="form-control" placeholder="https://example.com/video" required>
                </div>
                <div class="form-group">
                    <label for="videoLevel">Level</label>
                    <select id="videoLevel" class="form-control" required>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('videoModal')">Cancel</button>
                    <button type="submit" class="btn-modal btn-primary-modal">Save Video</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add/Edit Article Modal -->
    <div id="articleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="articleModalTitle">Add Article</h2>
                <button class="close-modal" onclick="app.closeModal('articleModal')">&times;</button>
            </div>
            <form id="articleForm">
                <input type="hidden" id="articleUnitId">
                <input type="hidden" id="articleId">
                <div class="form-group">
                    <label for="articleTitle">Article Title</label>
                    <input type="text" id="articleTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="articleContent">Content</label>
                    <textarea id="articleContent" class="form-control" rows="6" required></textarea>
                </div>
                <div class="form-group">
                    <label for="articleLevel">Level</label>
                    <select id="articleLevel" class="form-control" required>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('articleModal')">Cancel</button>
                    <button type="submit" class="btn-modal btn-primary-modal">Save Article</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add/Edit Worksheet Modal -->
    <div id="worksheetModalAdmin" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="worksheetModalTitle">Add Worksheet</h2>
                <button class="close-modal" onclick="app.closeModal('worksheetModalAdmin')">&times;</button>
            </div>
            <form id="worksheetForm">
                <input type="hidden" id="worksheetUnitId">
                <input type="hidden" id="worksheetId">
                <div class="form-group">
                    <label for="worksheetTitle">Worksheet Title</label>
                    <input type="text" id="worksheetTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="worksheetUrl">File URL</label>
                    <input type="url" id="worksheetUrl" class="form-control" placeholder="https://example.com/worksheet.pdf" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('worksheetModalAdmin')">Cancel</button>
                    <button type="submit" class="btn-modal btn-primary-modal">Save Worksheet</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Quiz Editor Modal -->
    <div id="quizModalAdmin" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 class="modal-title" id="quizModalTitle">Edit Quiz</h2>
                <button class="close-modal" onclick="app.closeModal('quizModalAdmin')">&times;</button>
            </div>
            <form id="quizForm">
                <input type="hidden" id="quizUnitId">
                <input type="hidden" id="quizId">
                <div class="form-group">
                    <label for="quizTitle">Quiz Title</label>
                    <input type="text" id="quizTitle" class="form-control" required>
                </div>
                
                <div id="questionsContainer">
                    <!-- Questions will be added here -->
                </div>
                
                <button type="button" id="addQuestionBtn" class="add-question-btn" onclick="app.addQuestion()">+ Add Question</button>
                
                <div class="modal-footer">
                    <button type="button" class="btn-modal btn-secondary-modal" onclick="app.closeModal('quizModalAdmin')">Cancel</button>
                    <button type="submit" class="btn-modal btn-primary-modal">Save Quiz</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Main App class
        class App {
            constructor() {
                this.user = null;
                this.language = 'en';
                this.currentPage = 'home';
                this.currentUnitId = null;
                this.currentWorksheetId = null;
                this.currentClassId = null;
                this.currentContentTab = 'videos';
                this.quizResponses = {};
                this.editingQuestionIndex = -1;
                this.editingOptionIndex = -1;
                this.currentSlide = 0;
                this.galleryInterval = null;
                this.menuOpen = false;
                
                this.units = [
                    {
                        id: 1,
                        title: { en: "Cell Biology", zh: "细胞生物学" },
                        description: {
                            en: "Learn about the basic unit of life: the cell.",
                            zh: "了解生命的基本单位：细胞。",
                        },
                        videos: [
                            {
                                id: 1,
                                title: { en: "Introduction to Cells", zh: "细胞介绍" },
                                url: "https://placehold.co/800x450?text=Cell+Biology+Video",
                                level: "beginner",
                            },
                        ],
                        articles: [
                            {
                                id: 1,
                                title: { en: "What is a Cell?", zh: "什么是细胞？" },
                                content: {
                                    en: "A cell is the smallest unit of life...",
                                    zh: "细胞是生命的基本单位...",
                                },
                                level: "beginner",
                            },
                        ],
                        worksheets: [
                            {
                                id: 1,
                                title: { en: "Cell Structure Worksheet", zh: "细胞结构练习题" },
                                url: "#",
                            },
                        ],
                        quizzes: [
                            {
                                id: 1,
                                title: { en: "Cell Basics Quiz", zh: "细胞基础知识测验" },
                                questions: [
                                    {
                                        id: 1,
                                        text: { en: "What is the control center of the cell?", zh: "细胞的控制中心是什么？" },
                                        options: [
                                            { id: "a", text: { en: "Mitochondria", zh: "线粒体" } },
                                            { id: "b", text: { en: "Nucleus", zh: "细胞核" } },
                                            { id: "c", text: { en: "Ribosome", zh: "核糖体" } },
                                            { id: "d", text: { en: "Lysosome", zh: "溶酶体" } },
                                        ],
                                        correct: "b",
                                    },
                                    {
                                        id: 2,
                                        text: { en: "Which organelle produces energy for the cell?", zh: "哪个细胞器为细胞产生能量？" },
                                        options: [
                                            { id: "a", text: { en: "Nucleus", zh: "细胞核" } },
                                            { id: "b", text: { en: "Mitochondria", zh: "线粒体" } },
                                            { id: "c", text: { en: "Golgi Apparatus", zh: "高尔基体" } },
                                            { id: "d", text: { en: "Endoplasmic Reticulum", zh: "内质网" } },
                                        ],
                                        correct: "b",
                                    },
                                ],
                            },
                        ],
                    },
                    {
                        id: 2,
                        title: { en: "Genetics", zh: "遗传学" },
                        description: {
                            en: "Explore the science of heredity and variation.",
                            zh: "探索遗传和变异的科学。",
                        },
                        videos: [
                            {
                                id: 2,
                                title: { en: "DNA and Genes", zh: "DNA和基因" },
                                url: "https://placehold.co/800x450?text=Genetics+Video",
                                level: "beginner",
                            },
                        ],
                        articles: [
                            {
                                id: 4,
                                title: { en: "Basics of DNA", zh: "DNA基础" },
                                content: {
                                    en: "DNA is a molecule that carries genetic information...",
                                    zh: "DNA是携带遗传信息的分子...",
                                },
                                level: "beginner",
                            },
                        ],
                        worksheets: [
                            {
                                id: 2,
                                title: { en: "Punnett Square Practice", zh: "庞尼特方格练习" },
                                url: "#",
                            },
                        ],
                        quizzes: [
                            {
                                id: 2,
                                title: { en: "Genetics Quiz", zh: "遗传学测验" },
                                questions: [
                                    {
                                        id: 1,
                                        text: { en: "What does DNA stand for?", zh: "DNA代表什么？" },
                                        options: [
                                            { id: "a", text: { en: "Deoxyribonucleic Acid", zh: "脱氧核糖核酸" } },
                                            { id: "b", text: { en: "Dynamic Nuclear Array", zh: "动态核阵列" } },
                                            { id: "c", text: { en: "Double Nitrogen Atom", zh: "双氮原子" } },
                                            { id: "d", text: { en: "Dense Nuclear Acid", zh: "密集核酸" } },
                                        ],
                                        correct: "a",
                                    },
                                ],
                            },
                        ],
                    },
                ];
                this.classes = [
                    {
                        id: 1,
                        name: { en: "Grade 10 Biology A", zh: "10年级生物A班" },
                        teacher: "Ms. Smith",
                        code: "BIO10A",
                        students: [],
                        tasks: [
                            {
                                id: 1,
                                title: { en: "Cell Diagram Assignment", zh: "细胞图作业" },
                                dueDate: "2023-12-15",
                                type: "assignment",
                            },
                        ],
                        materials: [
                            { id: 1, name: { en: "Cell Biology Notes", zh: "细胞生物学笔记" }, type: "pdf", size: "2.5 MB" },
                            { id: 2, name: { en: "Genetics Study Guide", zh: "遗传学学习指南" }, type: "pdf", size: "3.1 MB" },
                            { id: 3, name: { en: "Lab Safety Procedures", zh: "实验室安全规程" }, type: "pdf", size: "1.8 MB" },
                        ],
                        announcements: [
                            { id: 1, title: { en: "Midterm Exam Schedule", zh: "期中考试安排" }, date: "2023-11-15", content: { en: "The midterm exam will be on December 1st. Please review all units covered so far.", zh: "期中考试将在12月1日举行。请复习到目前为止所学的所有单元。" } },
                            { id: 2, title: { en: "Lab Session Reminder", zh: "实验课提醒" }, date: "2023-11-10", content: { en: "Don't forget to bring your lab coat and safety goggles for tomorrow's session.", zh: "别忘了明天的实验课要带上实验服和护目镜。" } },
                        ],
                    },
                ];
                
                // Your actual images
                this.images = [
                    "https://image2url.com/images/1756192024345-f9e28db4-2b09-4491-8922-12b7a732ea2c.jpg",  // Student writing notes in lab
                    "https://image2url.com/images/1756192080161-efb75f1e-bdf8-4114-9298-2637f5b805aa.jpg",  // Student using microscope
                    "https://image2url.com/images/1756192104012-7cd1420e-c891-4ecd-91a9-ec8f861c4dd5.jpg",  // Students working on group project
                    "https://image2url.com/images/1756192128274-d3e37b71-d0f1-4843-9309-44c5e0679293.jpg",  // Microscope view of cells
                    "https://image2url.com/images/1756192152148-4eb1318a-4302-4491-869a-f75dc8589d97.jpg",  // Students working with microscope
                    "https://image2url.com/images/1756192171902-114bce4a-a2de-47ff-b724-f1aff2d421fe.jpg",  // Student holding test tube
                    "https://image2url.com/images/1756192442681-6bea910d-e4b3-4e32-8d17-8922fa0ad21f.jpg"   // Students discussing experiment
                ];
                
                this.init();
            }
            
            init() {
                this.render();
                this.setupEventListeners();
                this.startGalleryAutoRotation();
            }
            
            setupEventListeners() {
                // Form submissions
                const editUnitForm = document.getElementById('editUnitForm');
                if (editUnitForm) {
                    editUnitForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.saveUnitChanges();
                    });
                }
                
                const addUnitForm = document.getElementById('addUnitForm');
                if (addUnitForm) {
                    addUnitForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.addUnit();
                    });
                }
                
                const videoForm = document.getElementById('videoForm');
                if (videoForm) {
                    videoForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.saveVideo();
                    });
                }
                
                const articleForm = document.getElementById('articleForm');
                if (articleForm) {
                    articleForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.saveArticle();
                    });
                }
                
                const worksheetForm = document.getElementById('worksheetForm');
                if (worksheetForm) {
                    worksheetForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.saveWorksheet();
                    });
                }
                
                const quizForm = document.getElementById('quizForm');
                if (quizForm) {
                    quizForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.saveQuiz();
                    });
                }
                
                const addQuestionBtn = document.getElementById('addQuestionBtn');
                if (addQuestionBtn) {
                    addQuestionBtn.addEventListener('click', () => {
                        this.addQuestion();
                    });
                }
            }
            
            startGalleryAutoRotation() {
                // Stop any existing interval
                if (this.galleryInterval) {
                    clearInterval(this.galleryInterval);
                }
                
                // Start new interval for automatic rotation
                this.galleryInterval = setInterval(() => {
                    this.nextSlide();
                }, 5000); // Change slide every 5 seconds
            }
            
            stopGalleryAutoRotation() {
                if (this.galleryInterval) {
                    clearInterval(this.galleryInterval);
                    this.galleryInterval = null;
                }
            }
            
            nextSlide() {
                const gallery = document.querySelector('.image-gallery');
                if (!gallery) return;
                
                const slides = gallery.querySelectorAll('.gallery-slide');
                if (slides.length === 0) return;
                
                // Hide current slide
                slides[this.currentSlide].classList.remove('active');
                
                // Update current slide index
                this.currentSlide = (this.currentSlide + 1) % slides.length;
                
                // Show next slide
                slides[this.currentSlide].classList.add('active');
                
                // Update indicators
                const indicators = gallery.querySelectorAll('.indicator');
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentSlide);
                });
            }
            
            prevSlide() {
                const gallery = document.querySelector('.image-gallery');
                if (!gallery) return;
                
                const slides = gallery.querySelectorAll('.gallery-slide');
                if (slides.length === 0) return;
                
                // Hide current slide
                slides[this.currentSlide].classList.remove('active');
                
                // Update current slide index
                this.currentSlide = (this.currentSlide - 1 + slides.length) % slides.length;
                
                // Show previous slide
                slides[this.currentSlide].classList.add('active');
                
                // Update indicators
                const indicators = gallery.querySelectorAll('.indicator');
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentSlide);
                });
            }
            
            login(email, password) {
                // Use your real email address
                if (email === "cpalmer@cwacs.cn" && password === "CWA2025BIO") {
                    this.user = { role: "admin", email, name: "Chagri (Chuck) Palmer" };
                    this.currentPage = 'home';
                    this.render();
                    return true;
                }
                
                if (email.includes("teacher")) {
                    this.user = { 
                        role: "teacher", 
                        email, 
                        name: email.split("@")[0].replace("teacher", "Teacher ") 
                    };
                    this.currentPage = 'home';
                    this.render();
                    return true;
                }
                
                this.user = { 
                    role: "student", 
                    email, 
                    name: email.split("@")[0].replace("student", "Student ") 
                };
                this.currentPage = 'home';
                this.render();
                return true;
            }
            
            logout() {
                this.user = null;
                this.currentPage = 'home';
                this.render();
            }
            
            toggleLanguage() {
                this.language = this.language === 'en' ? 'zh' : 'en';
                this.render();
            }
            
            navigateTo(page) {
                this.currentPage = page;
                this.render();
            }
            
            t(obj) {
                return obj[this.language] || obj.en;
            }
            
            showModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                }
            }
            
            closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('active');
                }
            }
            
            switchContentTab(tab) {
                this.currentContentTab = tab;
                
                // Update tab styling
                const tabs = document.querySelectorAll('.admin-tab');
                tabs.forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Find the clicked tab and add active class
                const clickedTab = document.querySelector(`.admin-tab[onclick="app.switchContentTab('${tab}')"]`);
                if (clickedTab) {
                    clickedTab.classList.add('active');
                }
                
                // Load content for the selected tab
                this.loadContentTab();
            }
            
            loadContentTab() {
                const contentTabContent = document.getElementById('contentTabContent');
                if (!contentTabContent) return;
                
                let contentHtml = '';
                const unit = this.units.find(u => u.id === this.currentUnitId);
                
                if (!unit) {
                    contentHtml = '<p>Please select a unit first.</p>';
                    contentTabContent.innerHTML = contentHtml;
                    return;
                }
                
                switch(this.currentContentTab) {
                    case 'videos':
                        contentHtml += `
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Videos for ${unit.title[this.language]}</h3>
                                <button onclick="app.showAddVideoModal(${unit.id})" class="add-btn text-white px-3 py-1 rounded text-sm">
                                    + Add Video
                                </button>
                            </div>
                            
                            <div class="content-list">
                                ${unit.videos.length > 0 ? 
                                    unit.videos.map(video => `
                                        <div class="content-item">
                                            <div>
                                                <strong>${video.title[this.language]}</strong>
                                                <div class="text-sm text-gray-500">${video.level}</div>
                                            </div>
                                            <div class="content-actions">
                                                <button onclick="app.showEditVideoModal(${unit.id}, ${video.id})" class="edit-btn text-white px-2 py-1 rounded text-sm">
                                                    Edit
                                                </button>
                                                <button onclick="app.deleteVideo(${unit.id}, ${video.id})" class="delete-btn text-white px-2 py-1 rounded text-sm">
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    `).join('') :
                                    '<p class="text-gray-500">No videos added yet.</p>'
                                }
                            </div>
                        `;
                        break;
                        
                    case 'articles':
                        contentHtml += `
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Articles for ${unit.title[this.language]}</h3>
                                <button onclick="app.showAddArticleModal(${unit.id})" class="add-btn text-white px-3 py-1 rounded text-sm">
                                    + Add Article
                                </button>
                            </div>
                            
                            <div class="content-list">
                                ${unit.articles.length > 0 ? 
                                    unit.articles.map(article => `
                                        <div class="content-item">
                                            <div>
                                                <strong>${article.title[this.language]}</strong>
                                                <div class="text-sm text-gray-500">${article.level}</div>
                                            </div>
                                            <div class="content-actions">
                                                <button onclick="app.showEditArticleModal(${unit.id}, ${article.id})" class="edit-btn text-white px-2 py-1 rounded text-sm">
                                                    Edit
                                                </button>
                                                <button onclick="app.deleteArticle(${unit.id}, ${article.id})" class="delete-btn text-white px-2 py-1 rounded text-sm">
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    `).join('') :
                                    '<p class="text-gray-500">No articles added yet.</p>'
                                }
                            </div>
                        `;
                        break;
                        
                    case 'worksheets':
                        contentHtml += `
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Worksheets for ${unit.title[this.language]}</h3>
                                <button onclick="app.showAddWorksheetModal(${unit.id})" class="add-btn text-white px-3 py-1 rounded text-sm">
                                    + Add Worksheet
                                </button>
                            </div>
                            
                            <div class="content-list">
                                ${unit.worksheets.length > 0 ? 
                                    unit.worksheets.map(worksheet => `
                                        <div class="content-item">
                                            <div>
                                                <strong>${worksheet.title[this.language]}</strong>
                                            </div>
                                            <div class="content-actions">
                                                <button onclick="app.showEditWorksheetModal(${unit.id}, ${worksheet.id})" class="edit-btn text-white px-2 py-1 rounded text-sm">
                                                    Edit
                                                </button>
                                                <button onclick="app.deleteWorksheet(${unit.id}, ${worksheet.id})" class="delete-btn text-white px-2 py-1 rounded text-sm">
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    `).join('') :
                                    '<p class="text-gray-500">No worksheets added yet.</p>'
                                }
                            </div>
                        `;
                        break;
                        
                    case 'quizzes':
                        const quiz = unit.quizzes[0];
                        contentHtml += `
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Quiz for ${unit.title[this.language]}</h3>
                                <button onclick="app.showEditQuizModal(${unit.id}, ${quiz.id})" class="edit-btn text-white px-3 py-1 rounded text-sm">
                                    Edit Quiz
                                </button>
                            </div>
                            
                            <div class="content-list">
                                <div class="content-item">
                                    <div>
                                        <strong>${quiz.title[this.language]}</strong>
                                        <div class="text-sm text-gray-500">${quiz.questions.length} questions</div>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                }
                
                contentTabContent.innerHTML = contentHtml;
            }
            
            showContentManagementModal(unitId) {
                this.currentUnitId = unitId;
                this.switchContentTab('videos'); // Default to videos tab
                this.showModal('contentManagementModal');
            }
            
            showAddVideoModal(unitId) {
                document.getElementById('videoModalTitle').textContent = 'Add Video';
                document.getElementById('videoForm').reset();
                document.getElementById('videoUnitId').value = unitId;
                document.getElementById('videoId').value = '';
                this.showModal('videoModal');
            }
            
            showEditVideoModal(unitId, videoId) {
                const unit = this.units.find(u => u.id === unitId);
                const video = unit.videos.find(v => v.id === videoId);
                
                document.getElementById('videoModalTitle').textContent = 'Edit Video';
                document.getElementById('videoUnitId').value = unitId;
                document.getElementById('videoId').value = videoId;
                document.getElementById('videoTitle').value = video.title[this.language];
                document.getElementById('videoUrl').value = video.url;
                document.getElementById('videoLevel').value = video.level;
                
                this.showModal('videoModal');
            }
            
            saveVideo() {
                const unitId = parseInt(document.getElementById('videoUnitId').value);
                const videoId = document.getElementById('videoId').value;
                const title = document.getElementById('videoTitle').value;
                const url = document.getElementById('videoUrl').value;
                const level = document.getElementById('videoLevel').value;
                
                if (!title || !url) {
                    alert(this.t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
                    return;
                }
                
                const unit = this.units.find(u => u.id === unitId);
                
                if (videoId) {
                    // Editing existing video
                    const video = unit.videos.find(v => v.id === parseInt(videoId));
                    video.title[this.language] = title;
                    video.url = url;
                    video.level = level;
                } else {
                    // Adding new video
                    const newId = Math.max(...unit.videos.map(v => v.id)) + 1;
                    unit.videos.push({
                        id: newId,
                        title: { en: title, zh: title },
                        url: url,
                        level: level
                    });
                }
                
                this.closeModal('videoModal');
                this.loadContentTab();
                
                alert(this.t({ en: 'Video saved successfully!', zh: '视频保存成功！' }));
            }
            
            deleteVideo(unitId, videoId) {
                if (confirm(this.t({ en: 'Are you sure you want to delete this video?', zh: '确定要删除这个视频吗？' }))) {
                    const unit = this.units.find(u => u.id === unitId);
                    unit.videos = unit.videos.filter(v => v.id !== videoId);
                    this.loadContentTab();
                    alert(this.t({ en: 'Video deleted successfully!', zh: '视频删除成功！' }));
                }
            }
            
            showAddArticleModal(unitId) {
                document.getElementById('articleModalTitle').textContent = 'Add Article';
                document.getElementById('articleForm').reset();
                document.getElementById('articleUnitId').value = unitId;
                document.getElementById('articleId').value = '';
                this.showModal('articleModal');
            }
            
            showEditArticleModal(unitId, articleId) {
                const unit = this.units.find(u => u.id === unitId);
                const article = unit.articles.find(a => a.id === articleId);
                
                document.getElementById('articleModalTitle').textContent = 'Edit Article';
                document.getElementById('articleUnitId').value = unitId;
                document.getElementById('articleId').value = articleId;
                document.getElementById('articleTitle').value = article.title[this.language];
                document.getElementById('articleContent').value = article.content[this.language];
                document.getElementById('articleLevel').value = article.level;
                
                this.showModal('articleModal');
            }
            
            saveArticle() {
                const unitId = parseInt(document.getElementById('articleUnitId').value);
                const articleId = document.getElementById('articleId').value;
                const title = document.getElementById('articleTitle').value;
                const content = document.getElementById('articleContent').value;
                const level = document.getElementById('articleLevel').value;
                
                if (!title || !content) {
                    alert(this.t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
                    return;
                }
                
                const unit = this.units.find(u => u.id === unitId);
                
                if (articleId) {
                    // Editing existing article
                    const article = unit.articles.find(a => a.id === parseInt(articleId));
                    article.title[this.language] = title;
                    article.content[this.language] = content;
                    article.level = level;
                } else {
                    // Adding new article
                    const newId = Math.max(...unit.articles.map(a => a.id)) + 1;
                    unit.articles.push({
                        id: newId,
                        title: { en: title, zh: title },
                        content: { en: content, zh: content },
                        level: level
                    });
                }
                
                this.closeModal('articleModal');
                this.loadContentTab();
                
                alert(this.t({ en: 'Article saved successfully!', zh: '文章保存成功！' }));
            }
            
            deleteArticle(unitId, articleId) {
                if (confirm(this.t({ en: 'Are you sure you want to delete this article?', zh: '确定要删除这篇文章吗？' }))) {
                    const unit = this.units.find(u => u.id === unitId);
                    unit.articles = unit.articles.filter(a => a.id !== articleId);
                    this.loadContentTab();
                    alert(this.t({ en: 'Article deleted successfully!', zh: '文章删除成功！' }));
                }
            }
            
            showAddWorksheetModal(unitId) {
                document.getElementById('worksheetModalTitle').textContent = 'Add Worksheet';
                document.getElementById('worksheetForm').reset();
                document.getElementById('worksheetUnitId').value = unitId;
                document.getElementById('worksheetId').value = '';
                this.showModal('worksheetModalAdmin');
            }
            
            showEditWorksheetModal(unitId, worksheetId) {
                const unit = this.units.find(u => u.id === unitId);
                const worksheet = unit.worksheets.find(w => w.id === worksheetId);
                
                document.getElementById('worksheetModalTitle').textContent = 'Edit Worksheet';
                document.getElementById('worksheetUnitId').value = unitId;
                document.getElementById('worksheetId').value = worksheetId;
                document.getElementById('worksheetTitle').value = worksheet.title[this.language];
                document.getElementById('worksheetUrl').value = worksheet.url;
                
                this.showModal('worksheetModalAdmin');
            }
            
            saveWorksheet() {
                const unitId = parseInt(document.getElementById('worksheetUnitId').value);
                const worksheetId = document.getElementById('worksheetId').value;
                const title = document.getElementById('worksheetTitle').value;
                const url = document.getElementById('worksheetUrl').value;
                
                if (!title || !url) {
                    alert(this.t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
                    return;
                }
                
                const unit = this.units.find(u => u.id === unitId);
                
                if (worksheetId) {
                    // Editing existing worksheet
                    const worksheet = unit.worksheets.find(w => w.id === parseInt(worksheetId));
                    worksheet.title[this.language] = title;
                    worksheet.url = url;
                } else {
                    // Adding new worksheet
                    const newId = Math.max(...unit.worksheets.map(w => w.id)) + 1;
                    unit.worksheets.push({
                        id: newId,
                        title: { en: title, zh: title },
                        url: url
                    });
                }
                
                this.closeModal('worksheetModalAdmin');
                this.loadContentTab();
                
                alert(this.t({ en: 'Worksheet saved successfully!', zh: '练习题保存成功！' }));
            }
            
            deleteWorksheet(unitId, worksheetId) {
                if (confirm(this.t({ en: 'Are you sure you want to delete this worksheet?', zh: '确定要删除这个练习题吗？' }))) {
                    const unit = this.units.find(u => u.id === unitId);
                    unit.worksheets = unit.worksheets.filter(w => w.id !== worksheetId);
                    this.loadContentTab();
                    alert(this.t({ en: 'Worksheet deleted successfully!', zh: '练习题删除成功！' }));
                }
            }
            
            showEditQuizModal(unitId, quizId) {
                const unit = this.units.find(u => u.id === unitId);
                const quiz = unit.quizzes.find(q => q.id === quizId);
                
                document.getElementById('quizModalTitle').textContent = 'Edit Quiz';
                document.getElementById('quizUnitId').value = unitId;
                document.getElementById('quizId').value = quizId;
                document.getElementById('quizTitle').value = quiz.title[this.language];
                
                // Clear existing questions
                document.getElementById('questionsContainer').innerHTML = '';
                
                // Add each question
                quiz.questions.forEach((question, index) => {
                    this.addQuestionToForm(question, index);
                });
                
                this.showModal('quizModalAdmin');
            }
            
            addQuestion() {
                const question = {
                    id: Date.now(),
                    text: { en: '', zh: '' },
                    options: [
                        { id: 'a', text: { en: '', zh: '' } },
                        { id: 'b', text: { en: '', zh: '' } },
                        { id: 'c', text: { en: '', zh: '' } },
                        { id: 'd', text: { en: '', zh: '' } }
                    ],
                    correct: 'a'
                };
                
                this.addQuestionToForm(question, -1);
            }
            
            addQuestionToForm(question, index) {
                const questionsContainer = document.getElementById('questionsContainer');
                const questionId = question.id || Date.now();
                
                const questionHtml = `
                    <div class="quiz-editor" id="question-${questionId}">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-semibold">Question</h4>
                            <button type="button" class="remove-btn" onclick="app.removeQuestion(${questionId})">Remove</button>
                        </div>
                        <div class="form-group">
                            <label>Question Text</label>
                            <input type="text" name="questionText-${questionId}" value="${question.text[this.language] || ''}" class="form-control" required>
                        </div>
                        
                        <div class="options mt-4">
                            <h5 class="font-medium mb-2">Options</h5>
                            ${question.options.map((option, optionIndex) => `
                                <div class="option-editor">
                                    <input type="radio" name="correctAnswer-${questionId}" value="${option.id}" ${option.id === question.correct ? 'checked' : ''}>
                                    <input type="text" name="optionText-${questionId}-${option.id}" value="${option.text[this.language] || ''}" class="form-control" style="flex: 1;" required>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="mt-2">
                            <button type="button" class="add-option-btn" onclick="app.addOption(${questionId})">+ Add Option</button>
                        </div>
                    </div>
                `;
                
                if (index >= 0) {
                    const existingQuestion = document.getElementById(`question-${questionId}`);
                    if (existingQuestion) {
                        existingQuestion.outerHTML = questionHtml;
                    }
                } else {
                    questionsContainer.insertAdjacentHTML('beforeend', questionHtml);
                }
            }
            
            addOption(questionId) {
                const questionDiv = document.getElementById(`question-${questionId}`);
                const optionsDiv = questionDiv.querySelector('.options');
                const optionCount = optionsDiv.querySelectorAll('.option-editor').length;
                const newOptionId = String.fromCharCode(97 + optionCount); // a, b, c, d, e...
                
                const optionHtml = `
                    <div class="option-editor">
                        <input type="radio" name="correctAnswer-${questionId}" value="${newOptionId}">
                        <input type="text" name="optionText-${questionId}-${newOptionId}" class="form-control" style="flex: 1;" required>
                    </div>
                `;
                
                optionsDiv.insertAdjacentHTML('beforeend', optionHtml);
            }
            
            removeQuestion(questionId) {
                if (confirm(this.t({ en: 'Are you sure you want to remove this question?', zh: '确定要删除这个问题吗？' }))) {
                    const questionDiv = document.getElementById(`question-${questionId}`);
                    if (questionDiv) {
                        questionDiv.remove();
                    }
                }
            }
            
            saveQuiz() {
                const unitId = parseInt(document.getElementById('quizUnitId').value);
                const quizId = parseInt(document.getElementById('quizId').value);
                const title = document.getElementById('quizTitle').value;
                
                if (!title) {
                    alert(this.t({ en: 'Please enter a quiz title', zh: '请输入测验标题' }));
                    return;
                }
                
                const unit = this.units.find(u => u.id === unitId);
                const quiz = unit.quizzes.find(q => q.id === quizId);
                
                // Update quiz title
                quiz.title[this.language] = title;
                
                // Clear existing questions
                quiz.questions = [];
                
                // Get all questions from the form
                const questionElements = document.querySelectorAll('.quiz-editor');
                questionElements.forEach(questionElement => {
                    const questionId = questionElement.id.replace('question-', '');
                    const questionText = document.querySelector(`[name="questionText-${questionId}"]`).value;
                    
                    // Get all options for this question
                    const optionElements = questionElement.querySelectorAll('.option-editor');
                    const options = [];
                    let correctAnswer = 'a';
                    
                    optionElements.forEach((optionElement, index) => {
                        const optionId = String.fromCharCode(97 + index); // a, b, c, d...
                        const optionText = optionElement.querySelector(`[name="optionText-${questionId}-${optionId}"]`).value;
                        const isCorrect = optionElement.querySelector(`[name="correctAnswer-${questionId}"]`).checked;
                        
                        options.push({
                            id: optionId,
                            text: { en: optionText, zh: optionText }
                        });
                        
                        if (isCorrect) {
                            correctAnswer = optionId;
                        }
                    });
                    
                    quiz.questions.push({
                        id: parseInt(questionId),
                        text: { en: questionText, zh: questionText },
                        options: options,
                        correct: correctAnswer
                    });
                });
                
                this.closeModal('quizModalAdmin');
                this.loadContentTab();
                
                alert(this.t({ en: 'Quiz saved successfully!', zh: '测验保存成功！' }));
            }
            
            render() {
                const appElement = document.getElementById('app');
                if (!appElement) return;
                
                let html = '';
                
                // Header with back button and menu button
                html += `
                    <header class="bg-gradient-to-r from-green-600 to-blue-600 text-white shadow-lg sticky top-0 z-50">
                        <div class="container mx-auto px-4 py-4 flex flex-wrap items-center justify-between">
                            <!-- Back Button -->
                            ${this.currentPage !== 'home' ? `
                                <button onclick="app.navigateTo('home')" class="back-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                                    </svg>
                                </button>
                            ` : ''}
                            
                            <div class="flex items-center space-x-2">
                                <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.69-1-2.222a4.02 4.02 0 01-.658-.457 5 5 0 01-7.07-7.07 4.02 4.02 0 01-.457-.658C3.31 6.31 2.515 5.954 1.62 6a2 2 0 11-1.066-3.824 4.02 4.02 0 01.457-.658 5 5 0 017.07-7.07 4.022 4.022 0 012.222-1c.895 0 1.69.356 2.222 1.001a5 5 0 110 9.998z" />
                                    </svg>
                                </div>
                                <h1 class="text-2xl font-bold">CWA-Biology</h1>
                            </div>
                            
                            <nav class="flex items-center space-x-2 mt-2 lg:mt-0">
                                <button onclick="app.navigateTo('home')" class="nav-link ${this.currentPage === 'home' ? 'active' : ''}">
                                    ${this.t({ en: "Home", zh: "首页" })}
                                </button>
                                ${this.user ? `
                                    <button onclick="app.navigateTo('library')" class="nav-link ${this.currentPage === 'library' ? 'active' : ''}">
                                        ${this.t({ en: "Library", zh: "资料库" })}
                                    </button>
                                    <button onclick="app.navigateTo('quizzes')" class="nav-link ${this.currentPage === 'quizzes' ? 'active' : ''}">
                                        ${this.t({ en: "Quizzes", zh: "测验" })}
                                    </button>
                                    <button onclick="app.navigateTo('worksheets')" class="nav-link ${this.currentPage === 'worksheets' ? 'active' : ''}">
                                        ${this.t({ en: "Worksheets", zh: "练习题" })}
                                    </button>
                                    <button onclick="app.navigateTo('classes')" class="nav-link ${this.currentPage === 'classes' ? 'active' : ''}">
                                        ${this.t({ en: "Classes", zh: "班级" })}
                                    </button>
                                ` : ''}
                            </nav>

                            <div class="flex items-center space-x-2 mt-2 lg:mt-0">
                                <button 
                                    onclick="app.toggleLanguage()"
                                    class="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded-full text-sm transition duration-200"
                                >
                                    ${this.language === "en" ? "中文" : "EN"}
                                </button>
                                
                                ${this.user ? `
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm">${this.user.name} (${this.user.role})</span>
                                        <button 
                                            onclick="app.logout()"
                                            class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition duration-200"
                                        >
                                            ${this.t({ en: "Logout", zh: "登出" })}
                                        </button>
                                    </div>
                                ` : `
                                    <div class="flex space-x-2">
                                        <button onclick="app.navigateTo('login')" class="bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded text-sm transition duration-200">
                                            ${this.t({ en: "Login", zh: "登录" })}
                                        </button>
                                        <button onclick="app.navigateTo('register')" class="bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm transition duration-200">
                                            ${this.t({ en: "Register", zh: "注册" })}
                                        </button>
                                    </div>
                                `}
                                
                                ${this.user?.role === 'admin' ? `
                                    <button onclick="app.navigateTo('admin')" class="admin-button">
                                        ${this.t({ en: "Admin", zh: "管理员" })}
                                    </button>
                                ` : ''}
                                
                                <!-- Menu Button -->
                                <button onclick="app.toggleMenu()" class="menu-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <!-- Menu Overlay -->
                    <div id="menuOverlay" class="menu-overlay">
                        <button class="menu-close" onclick="app.toggleMenu()">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                        <div class="menu-item" onclick="app.navigateTo('home')">
                            ${this.t({ en: "Home", zh: "首页" })}
                        </div>
                        <div class="menu-item" onclick="app.navigateTo('library')">
                            ${this.t({ en: "Library", zh: "资料库" })}
                        </div>
                        <div class="menu-item" onclick="app.navigateTo('quizzes')">
                            ${this.t({ en: "Quizzes", zh: "测验" })}
                        </div>
                        <div class="menu-item" onclick="app.navigateTo('worksheets')">
                            ${this.t({ en: "Worksheets", zh: "练习题" })}
                        </div>
                        <div class="menu-item" onclick="app.navigateTo('classes')">
                            ${this.t({ en: "Classes", zh: "班级" })}
                        </div>
                        ${this.user ? `
                            <div class="menu-item" onclick="app.navigateTo('admin')">
                                ${this.t({ en: "Admin", zh: "管理员" })}
                            </div>
                        ` : ''}
                        <div class="menu-item" onclick="app.logout()">
                            ${this.t({ en: "Logout", zh: "登出" })}
                        </div>
                    </div>
                `;
                
                // Content based on current page
                switch(this.currentPage) {
                    case 'login':
                        html += this.loginPage();
                        break;
                    case 'register':
                        html += this.registerPage();
                        break;
                    case 'admin':
                        html += this.adminPage();
                        break;
                    case 'library':
                        html += this.libraryPage();
                        break;
                    case 'quizzes':
                        html += this.quizzesPage();
                        break;
                    case 'worksheets':
                        html += this.worksheetsPage();
                        break;
                    case 'classes':
                        html += this.classesPage();
                        break;
                    default:
                        html += this.homePage();
                }
                
                // Footer
                html += `
                    <footer class="bg-gray-800 text-white py-12">
                        <div class="container mx-auto px-4">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                                <div>
                                    <div class="flex items-center space-x-2 mb-4">
                                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.69-1-2.222a4.02 4.02 0 01-.658-.457 5 5 0 01-7.07-7.07 4.02 4.02 0 01-.457-.658C3.31 6.31 2.515 5.954 1.62 6a2 2 0 11-1.066-3.824 4.02 4.02 0 01.457-.658 5 5 0 017.07-7.07 4.022 4.022 0 012.222-1c.895 0 1.69.356 2.222 1.001a5 5 0 110 9.998z" />
                                            </svg>
                                        </div>
                                        <h3 class="text-xl font-bold">CWA-Biology</h3>
                                    </div>
                                    <p class="text-gray-300 leading-relaxed">
                                        ${this.t({ 
                                            en: "Empowering biology education through interactive learning and comprehensive resources.", 
                                            zh: "通过互动学习和全面的资源，提升生物学教育。"
                                        })}
                                    </p>
                                </div>
                                
                                <div>
                                    <h4 class="text-lg font-semibold mb-4">${this.t({ en: "Quick Links", zh: "快速链接" })}</h4>
                                    <ul class="space-y-2 text-gray-300">
                                        <li><a href="#" class="hover:text-white transition duration-200">Home</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">Library</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">Quizzes</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">Worksheets</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">Classes</a></li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h4 class="text-lg font-semibold mb-4">${this.t({ en: "Resources", zh: "资源" })}</h4>
                                    <ul class="space-y-2 text-gray-300">
                                        <li><a href="#" class="hover:text-white transition duration-200">${this.t({ en: "Study Guides", zh: "学习指南" })}</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">${this.t({ en: "Video Tutorials", zh: "视频教程" })}</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">${this.t({ en: "Practice Tests", zh: "练习测试" })}</a></li>
                                        <li><a href="#" class="hover:text-white transition duration-200">${this.t({ en: "Teacher Resources", zh: "教师资源" })}</a></li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h4 class="text-lg font-semibold mb-4">${this.t({ en: "Contact", zh: "联系" })}</h4>
                                    <div class="contact-info">
                                        <div class="contact-item">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="contact-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                            </svg>
                                            <span>info.admissions@cwacs.cn</span>
                                        </div>
                                        <div class="contact-item">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="contact-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                            </svg>
                                            <span>0512-5298 2629 / 0512-5298 2628</span>
                                        </div>
                                        <div class="contact-item">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="contact-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                            </svg>
                                            <span>No.8, Yijia Road, Changshu, Jiangsu</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                                <p>&copy; 2025 CWA-Biology. ${this.t({ en: "All rights reserved.", zh: "版权所有。" })}</p>
                            </div>
                        </div>
                    </footer>
                `;
                
                appElement.innerHTML = html;
                
                // Re-setup event listeners after rendering
                this.setupEventListeners();
                
                // Set up navigation arrows
                this.setupNavigationArrows();
                
                // Toggle menu if needed
                if (this.menuOpen) {
                    document.getElementById('menuOverlay').classList.add('active');
                }
            }
            
            setupNavigationArrows() {
                // Remove existing arrows
                const existingArrows = document.querySelectorAll('.nav-arrow');
                existingArrows.forEach(arrow => arrow.remove());
                
                // Create navigation arrows only on home page
                if (this.currentPage === 'home') {
                    const gallery = document.querySelector('.image-gallery');
                    if (gallery) {
                        // Create left arrow
                        const leftArrow = document.createElement('div');
                        leftArrow.className = 'nav-arrow left';
                        leftArrow.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" /></svg>';
                        leftArrow.onclick = () => {
                            this.prevSlide();
                            this.stopGalleryAutoRotation();
                        };
                        gallery.appendChild(leftArrow);
                        
                        // Create right arrow
                        const rightArrow = document.createElement('div');
                        rightArrow.className = 'nav-arrow right';
                        rightArrow.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" /></svg>';
                        rightArrow.onclick = () => {
                            this.nextSlide();
                            this.stopGalleryAutoRotation();
                        };
                        gallery.appendChild(rightArrow);
                    }
                }
            }
            
            toggleMenu() {
                this.menuOpen = !this.menuOpen;
                const menuOverlay = document.getElementById('menuOverlay');
                if (menuOverlay) {
                    menuOverlay.classList.toggle('active');
                }
            }
            
            homePage() {
                return `
                    <section class="bg-gradient-to-br from-green-50 to-blue-50 py-20">
                        <div class="container mx-auto px-4">
                            <div class="flex flex-col lg:flex-row items-center">
                                <div class="lg:w-1/2 mb-10 lg:mb-0">
                                    <h2 class="text-4xl lg:text-5xl font-bold text-gray-800 mb-6 leading-tight">
                                        ${this.t({ en: "Master Biology with", zh: "掌握生物学" })}
                                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600"> CWA-Biology</span>
                                    </h2>
                                    <p class="text-xl text-gray-600 mb-8 leading-relaxed">
                                        ${this.t({ 
                                            en: "Interactive learning platform for students and teachers. Access comprehensive resources, track progress, and excel in biology.", 
                                            zh: "学生和教师的互动学习平台。访问全面的资源，跟踪进度，并在生物学上取得优异成绩。"
                                        })}
                                    </p>
                                    <div class="flex flex-wrap gap-4">
                                        <button class="btn-primary text-white px-8 py-3 rounded-full text-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200" onclick="app.navigateTo('library')">
                                            ${this.t({ en: "Get Started", zh: "开始学习" })}
                                        </button>
                                        <button class="btn-secondary text-green-600 px-8 py-3 rounded-full text-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200" onclick="app.navigateTo('library')">
                                            ${this.t({ en: "Learn More", zh: "了解更多" })}
                                        </button>
                                    </div>
                                </div>
                                <div class="lg:w-1/2">
                                    <div class="image-gallery">
                                        <img 
                                            src="${this.images[0]}" 
                                            alt="Biology Learning" 
                                            class="gallery-slide active"
                                        />
                                        <img 
                                            src="${this.images[1]}" 
                                            alt="Microscope View" 
                                            class="gallery-slide"
                                        />
                                        <img 
                                            src="${this.images[2]}" 
                                            alt="Group Project" 
                                            class="gallery-slide"
                                        />
                                        <img 
                                            src="${this.images[3]}" 
                                            alt="Science Experiment" 
                                            class="gallery-slide"
                                        />
                                        <img 
                                            src="${this.images[4]}" 
                                            alt="Students Working with Microscope" 
                                            class="gallery-slide"
                                        />
                                        <img 
                                            src="${this.images[5]}" 
                                            alt="Student Holding Test Tube" 
                                            class="gallery-slide"
                                        />
                                        <img 
                                            src="${this.images[6]}" 
                                            alt="Students Discussing Experiment" 
                                            class="gallery-slide"
                                        />
                                        <div class="gallery-indicators">
                                            <div class="indicator active"></div>
                                            <div class="indicator"></div>
                                            <div class="indicator"></div>
                                            <div class="indicator"></div>
                                            <div class="indicator"></div>
                                            <div class="indicator"></div>
                                            <div class="indicator"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <section class="py-20 bg-gray-50">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-16">
                                <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
                                    ${this.t({ en: "Key Features", zh: "主要功能" })}
                                </h2>
                                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                                    ${this.t({ 
                                        en: "Everything you need to succeed in secondary school biology, all in one platform.", 
                                        zh: "中学生物学所需的一切，尽在这一平台。"
                                    })}
                                </p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2 hover-scale">
                                    <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-semibold text-gray-800 mb-3">${this.t({ en: "Comprehensive Library", zh: "综合资料库" })}</h3>
                                    <p class="text-gray-600 leading-relaxed">${this.t({ 
                                        en: "Access all biology units with videos, articles at beginner, intermediate, and original levels.", 
                                        zh: "访问所有生物学单元，包含初、中、高级水平的视频和文章。"
                                    })}</p>
                                    <button onclick="app.navigateTo('library')" class="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200">
                                        ${this.t({ en: "Explore", zh: "探索" })}
                                    </button>
                                </div>
                                
                                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2 hover-scale">
                                    <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-semibold text-gray-800 mb-3">${this.t({ en: "Interactive Quizzes", zh: "互动测验" })}</h3>
                                    <p class="text-gray-600 leading-relaxed">${this.t({ 
                                        en: "Test your knowledge with unit-based quizzes and track your progress over time.", 
                                        zh: "通过单元测验测试您的知识，并跟踪您的学习进度。"
                                    })}</p>
                                    <button onclick="app.navigateTo('quizzes')" class="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200">
                                        ${this.t({ en: "Take Quiz", zh: "参加测验" })}
                                    </button>
                                </div>
                                
                                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2 hover-scale">
                                    <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-semibold text-gray-800 mb-3">${this.t({ en: "Practice Worksheets", zh: "练习题" })}</h3>
                                    <p class="text-gray-600 leading-relaxed">${this.t({ 
                                        en: "Downloadable worksheets for each unit to reinforce your understanding.", 
                                        zh: "每个单元的可下载练习题，巩固您的理解。"
                                    })}</p>
                                    <button onclick="app.navigateTo('worksheets')" class="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200">
                                        ${this.t({ en: "Download", zh: "下载" })}
                                    </button>
                                </div>
                                
                                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2 hover-scale">
                                    <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.879-1.13M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-semibold text-gray-800 mb-3">${this.t({ en: "Class Management", zh: "班级管理" })}</h3>
                                    <p class="text-gray-600 leading-relaxed">${this.t({ 
                                        en: "Join classes, complete assignments, and interact with teachers and peers.", 
                                        zh: "加入班级，完成作业，与老师和同学互动。"
                                    })}</p>
                                    <button onclick="app.navigateTo('classes')" class="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200">
                                        ${this.t({ en: "Join Class", zh: "加入班级" })}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <section class="py-20 bg-white">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-16">
                                <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
                                    ${this.t({ en: "Biology Units", zh: "生物学单元" })}
                                </h2>
                                <p class="text-xl text-gray-600">
                                    ${this.t({ 
                                        en: "Explore our comprehensive biology curriculum", 
                                        zh: "探索我们全面的生物学课程"
                                    })}
                                </p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                ${this.units.map(unit => `
                                    <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition duration-300 transform hover:-translate-y-1 hover-scale">
                                        <img 
                                            src="https://placehold.co/300x200?text=${encodeURIComponent(unit.title[this.language])}" 
                                            alt="${unit.title[this.language]}" 
                                            class="w-full h-48 object-cover"
                                        />
                                        <div class="p-6">
                                            <h3 class="text-xl font-semibold text-gray-800 mb-2">${unit.title[this.language]}</h3>
                                            <p class="text-gray-600 mb-4 text-sm leading-relaxed">${unit.description[this.language]}</p>
                                            <div class="flex flex-wrap gap-2 mb-4">
                                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">
                                                    ${unit.videos.length} ${this.t({ en: "Videos", zh: "视频" })}
                                                </span>
                                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium">
                                                    ${unit.articles.length} ${this.t({ en: "Articles", zh: "文章" })}
                                                </span>
                                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium">
                                                    ${unit.quizzes.length} ${this.t({ en: "Quizzes", zh: "测验" })}
                                                </span>
                                            </div>
                                            <button 
                                                onclick="app.navigateTo('library')"
                                                class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200"
                                            >
                                                ${this.t({ en: "Explore Unit", zh: "探索单元" })}
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </section>
                    
                    <section class="py-20 bg-gray-50">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-16">
                                <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
                                    ${this.t({ en: "Available Classes", zh: "可用班级" })}
                                </h2>
                                <p class="text-xl text-gray-600">
                                    ${this.t({ 
                                        en: "Join classes to learn with teachers and peers", 
                                        zh: "加入班级，与老师和同学一起学习"
                                    })}
                                </p>
                            </div>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                ${this.classes.map(classObj => `
                                    <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition duration-300 hover-scale">
                                        <div class="flex justify-between items-start mb-4">
                                            <div>
                                                <h3 class="text-xl font-semibold text-gray-800">${classObj.name[this.language]}</h3>
                                                <p class="text-gray-600">${this.t({ en: "Teacher", zh: "教师" })}: ${classObj.teacher}</p>
                                            </div>
                                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                                                ${classObj.code}
                                            </span>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h4 class="font-semibold text-gray-700 mb-2">
                                                ${this.t({ en: "Upcoming Tasks", zh: "即将到期的任务" })}
                                            </h4>
                                            ${classObj.tasks.length > 0 ? `
                                                <ul class="space-y-2">
                                                    ${classObj.tasks.map(task => `
                                                        <li class="text-sm text-gray-600 flex justify-between">
                                                            <span>${task.title[this.language]}</span>
                                                            <span class="text-green-600 font-medium">${task.dueDate}</span>
                                                        </li>
                                                    `).join('')}
                                                </ul>
                                            ` : `
                                                <p class="text-sm text-gray-500 italic">
                                                    ${this.t({ en: "No upcoming tasks", zh: "暂无即将到期的任务" })}
                                                </p>
                                            `}
                                        </div>
                                        
                                        <button 
                                            onclick="app.viewClassMaterials(${classObj.id})"
                                            class="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-semibold transition duration-200"
                                        >
                                            ${this.t({ en: "View Materials", zh: "查看资料" })}
                                        </button>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </section>
                `;
            }
            
            loginPage() {
                return `
                    <div class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4 fade-in">
                        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                            <div class="text-center mb-8">
                                <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
                                    </svg>
                                </div>
                                <h2 class="text-2xl font-bold text-gray-800">Login to CWA-Biology</h2>
                                <p class="text-gray-600 mt-2">Welcome back to your learning journey</p>
                            </div>
                            
                            <form id="login-form" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Email Address
                                    </label>
                                    <input
                                        type="email"
                                        name="email"
                                        id="email"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="your@email.com"
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Password
                                    </label>
                                    <input
                                        type="password"
                                        name="password"
                                        id="password"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="••••••••"
                                    />
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <label class="flex items-center">
                                        <input type="checkbox" class="rounded border-gray-300 text-green-500 focus:ring-green-500" />
                                        <span class="ml-2 text-sm text-gray-600">Remember me</span>
                                    </label>
                                    <a href="#" class="text-sm text-green-600 hover:text-green-500">
                                        Forgot password?
                                    </a>
                                </div>
                                
                                <button
                                    type="submit"
                                    class="w-full btn-primary text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
                                    onclick="event.preventDefault(); app.login(document.getElementById('email').value, document.getElementById('password').value);"
                                >
                                    Login
                                </button>
                            </form>
                            
                            <div class="mt-6 text-center">
                                <p class="text-gray-600">
                                    Don't have an account?{' '}
                                    <a href="#" onclick="app.navigateTo('register')" class="text-green-600 hover:text-green-500 font-medium">
                                        Register now
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            registerPage() {
                return `
                    <div class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4 fade-in">
                        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                            <div class="text-center mb-8">
                                <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
                                    </svg>
                                </div>
                                <h2 class="text-2xl font-bold text-gray-800">Create Account</h2>
                                <p class="text-gray-600 mt-2">Join CWA-Biology today</p>
                            </div>
                            
                            <form id="register-form" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        I am a
                                    </label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <button
                                            type="button"
                                            onclick="document.getElementById('role').value = 'student';"
                                            class="py-2 px-4 rounded-lg text-sm font-medium transition duration-200 bg-green-100 text-green-800"
                                        >
                                            Student
                                        </button>
                                        <button
                                            type="button"
                                            onclick="document.getElementById('role').value = 'teacher';"
                                            class="py-2 px-4 rounded-lg text-sm font-medium transition duration-200 bg-green-100 text-green-800"
                                        >
                                            Teacher
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Full Name *
                                    </label>
                                    <input
                                        type="text"
                                        name="name"
                                        id="name"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="John Doe"
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Email Address *
                                    </label>
                                    <input
                                        type="email"
                                        name="email"
                                        id="email"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="your@email.com"
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Password *
                                    </label>
                                    <input
                                        type="password"
                                        name="password"
                                        id="password"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="••••••••"
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Confirm Password *
                                    </label>
                                    <input
                                        type="password"
                                        name="confirmPassword"
                                        id="confirmPassword"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="••••••••"
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Class Code (if applicable)
                                    </label>
                                    <input
                                        type="text"
                                        name="classCode"
                                        id="classCode"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        placeholder="BIO10A"
                                    />
                                </div>
                                
                                <button
                                    type="submit"
                                    class="w-full btn-primary text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
                                    onclick="event.preventDefault(); 
                                        const name = document.getElementById('name').value;
                                        const email = document.getElementById('email').value;
                                        const password = document.getElementById('password').value;
                                        const confirmPassword = document.getElementById('confirmPassword').value;
                                        const role = document.getElementById('role').value;
                                        const classCode = document.getElementById('classCode').value;
                                        
                                        if (!name || !email || !password) {
                                            alert('${this.t({ en: 'Please fill in all required fields', zh: '请填写所有必填字段' })}');
                                            return;
                                        }
                                        
                                        if (password !== confirmPassword) {
                                            alert('${this.t({ en: 'Passwords do not match', zh: '密码不匹配' })}');
                                            return;
                                        }
                                        
                                        if (password.length < 6) {
                                            alert('${this.t({ en: 'Password must be at least 6 characters long', zh: '密码必须至少6个字符' })}');
                                            return;
                                        }
                                        
                                        // Simulate successful registration
                                        alert('${this.t({ en: 'Registration successful! Please login with your credentials.', zh: '注册成功！请使用您的凭据登录。' })}');
                                        app.login(email, password);
                                    "
                                >
                                    Register
                                </button>
                            </form>
                            
                            <div class="mt-6 text-center">
                                <p class="text-gray-600">
                                    ${this.t({ en: "Already have an account?", zh: "已有账户？" })}{' '}
                                    <a href="#" onclick="app.navigateTo('login')" class="text-green-600 hover:text-green-500 font-medium">
                                        ${this.t({ en: "Login here", zh: "立即登录" })}
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            adminPage() {
                return `
                    <div class="min-h-screen bg-gray-100 fade-in">
                        <div class="bg-white shadow">
                            <div class="container mx-auto px-4">
                                <div class="flex space-x-1 py-4">
                                    <button onclick="app.navigateTo('admin')" class="admin-tab-button active">
                                        ${this.t({ en: "Units", zh: "单元" })}
                                    </button>
                                    <button onclick="app.showContentManagementModal(1)" class="admin-tab-button">
                                        ${this.t({ en: "Content", zh: "内容" })}
                                    </button>
                                    <button onclick="alert('${this.t({ en: 'User Management', zh: '用户管理' })}')" class="admin-tab-button">
                                        ${this.t({ en: "Users", zh: "用户" })}
                                    </button>
                                    <button onclick="alert('${this.t({ en: 'Analytics Dashboard', zh: '分析仪表板' })}')" class="admin-tab-button">
                                        ${this.t({ en: "Analytics", zh: "分析" })}
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="container mx-auto px-4 py-8">
                            <div class="bg-white rounded-xl shadow-lg p-8">
                                <h1 class="text-3xl font-bold text-gray-800 mb-6">
                                    ${this.t({ en: "Admin Dashboard", zh: "管理员仪表板" })}
                                </h1>
                                
                                <div class="prose max-w-none">
                                    <h2 class="text-xl font-semibold text-gray-700 mb-4 capitalize">
                                        ${this.t({ en: "Units Management", zh: "单元管理" })}
                                    </h2>
                                    <p class="text-gray-600 mb-4">
                                        ${this.t({ en: "Welcome to the admin dashboard. From here, you can manage all aspects of the CWA-Biology platform.", zh: "欢迎来到管理员仪表板。在这里，您可以管理CWA-Biology平台的所有方面。" })}
                                    </p>
                                    
                                    <div class="space-y-4">
                                        <h3 class="text-lg font-medium text-gray-700">${this.t({ en: "Unit Management", zh: "单元管理" })}</h3>
                                        <p class="text-gray-600">${this.t({ en: "Create, edit, and delete biology units.", zh: "创建、编辑和删除生物学单元。" })}</p>
                                        <button onclick="app.showAddUnitModal()" class="add-btn text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200">
                                            ${this.t({ en: "Add New Unit", zh: "添加新单元" })}
                                        </button>
                                    </div>
                                    
                                    <div class="mt-8 space-y-4">
                                        <h3 class="text-lg font-medium text-gray-700">${this.t({ en: "Current Units", zh: "当前单元" })}</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            ${this.units.map(unit => `
                                                <div class="border border-gray-200 rounded-lg p-4">
                                                    <div class="flex justify-between items-start">
                                                        <div>
                                                            <h4 class="font-semibold">${unit.title[this.language]}</h4>
                                                            <p class="text-sm text-gray-600">${unit.description[this.language]}</p>
                                                        </div>
                                                        <div class="flex space-x-2">
                                                            <button onclick="app.showEditUnitModal(${unit.id})" class="edit-btn text-white px-3 py-1 rounded text-sm hover:shadow-lg transform hover:-translate-y-1 transition duration-200">
                                                                ${this.t({ en: "Edit", zh: "编辑" })}
                                                            </button>
                                                            <button onclick="app.deleteUnit(${unit.id})" class="delete-btn text-white px-3 py-1 rounded text-sm hover:shadow-lg transform hover:-translate-y-1 transition duration-200">
                                                                ${this.t({ en: "Delete", zh: "删除" })}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // New methods for all interactive functionality
            watchVideo(unitId) {
                const unit = this.units.find(u => u.id === unitId);
                alert(`${this.t({ en: 'Playing video for', zh: '播放视频' })} ${unit.title[this.language]}`);
            }
            
            readArticle(unitId) {
                const unit = this.units.find(u => u.id === unitId);
                alert(`${this.t({ en: 'Reading article for', zh: '阅读文章' })} ${unit.title[this.language]}`);
            }
            
            startQuiz(unitId) {
                this.currentUnitId = unitId;
                const unit = this.units.find(u => u.id === unitId);
                const quiz = unit.quizzes[0];
                
                let quizHtml = '';
                quizHtml += `<h3 class="text-2xl font-bold mb-6">${unit.title[this.language]}</h3>`;
                quizHtml += `<p class="text-gray-600 mb-6">${this.t({ en: 'Answer all questions to complete the quiz.', zh: '回答所有问题以完成测验。' })}</p>`;
                
                quiz.questions.forEach((question, index) => {
                    quizHtml += `
                        <div class="question">
                            <h4 class="font-semibold mb-2">${index + 1}. ${question.text[this.language]}</h4>
                            <div class="options">
                                ${question.options.map(option => `
                                    <label class="option">
                                        <input type="radio" name="question${question.id}" value="${option.id}" onchange="app.recordQuizAnswer(${question.id}, '${option.id}')">
                                        ${option.text[this.language]}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `;
                });
                
                document.getElementById('quizContainer').innerHTML = quizHtml;
                this.showModal('quizModal');
            }
            
            recordQuizAnswer(questionId, answer) {
                this.quizResponses[questionId] = answer;
            }
            
            submitQuiz() {
                const unit = this.units.find(u => u.id === this.currentUnitId);
                const quiz = unit.quizzes[0];
                
                let correct = 0;
                let total = quiz.questions.length;
                
                quiz.questions.forEach(question => {
                    if (this.quizResponses[question.id] === question.correct) {
                        correct++;
                    }
                });
                
                const score = Math.round((correct / total) * 100);
                alert(`${this.t({ en: 'Quiz completed! Your score:', zh: '测验完成！您的分数：' })} ${score}% (${correct}/${total})`);
                
                this.closeModal('quizModal');
                this.quizResponses = {};
            }
            
            downloadWorksheet(worksheetId) {
                this.currentWorksheetId = worksheetId;
                this.showModal('worksheetModal');
            }
            
            confirmDownload() {
                const worksheet = this.units.flatMap(u => u.worksheets).find(w => w.id === this.currentWorksheetId);
                alert(`${this.t({ en: 'Downloading', zh: '下载' })} ${worksheet.title[this.language]}`);
                this.closeModal('worksheetModal');
            }
            
            downloadAllWorksheets(unitId) {
                const unit = this.units.find(u => u.id === unitId);
                alert(`${this.t({ en: 'Downloading all worksheets for', zh: '下载所有练习题' })} ${unit.title[this.language]}`);
            }
            
            startAssignment(taskId) {
                const task = this.classes.flatMap(c => c.tasks).find(t => t.id === taskId);
                alert(`${this.t({ en: 'Starting assignment', zh: '开始作业' })} ${task.title[this.language]}`);
            }
            
            viewClassMaterials(classId) {
                this.currentClassId = classId;
                const classObj = this.classes.find(c => c.id === classId);
                const materialsList = document.getElementById('materialsList');
                
                if (materialsList) {
                    let materialsHtml = '';
                    classObj.materials.forEach(material => {
                        materialsHtml += `
                            <li class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                <span>${material.name[this.language]} (${material.size})</span>
                                <button onclick="app.downloadMaterial(${material.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm">
                                    ${this.t({ en: "Download", zh: "下载" })}
                                </button>
                            </li>
                        `;
                    });
                    materialsList.innerHTML = materialsHtml;
                }
                
                this.showModal('classMaterialsModal');
            }
            
            downloadMaterial(materialId) {
                const material = this.classes.flatMap(c => c.materials).find(m => m.id === materialId);
                alert(`${this.t({ en: 'Downloading', zh: '下载' })} ${material.name[this.language]}`);
                this.closeModal('classMaterialsModal');
            }
            
            viewAnnouncements(classId) {
                this.currentClassId = classId;
                const classObj = this.classes.find(c => c.id === classId);
                const announcementsList = document.getElementById('announcementsList');
                
                if (announcementsList) {
                    let announcementsHtml = '';
                    classObj.announcements.forEach(announcement => {
                        announcementsHtml += `
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold">${announcement.title[this.language]}</h4>
                                <p class="text-sm text-gray-500">${announcement.date}</p>
                                <p class="mt-1">${announcement.content[this.language]}</p>
                            </div>
                        `;
                    });
                    announcementsList.innerHTML = announcementsHtml;
                }
                
                this.showModal('announcementModal');
            }
            
            showAddUnitModal() {
                document.getElementById('addUnitTitle').value = '';
                document.getElementById('addUnitDescription').value = '';
                this.showModal('addUnitModal');
            }
            
            addUnit() {
                const title = document.getElementById('addUnitTitle').value;
                const description = document.getElementById('addUnitDescription').value;
                
                if (!title || !description) {
                    alert(this.t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
                    return;
                }
                
                const newId = Math.max(...this.units.map(u => u.id)) + 1;
                this.units.push({
                    id: newId,
                    title: { en: title, zh: title },
                    description: { en: description, zh: description },
                    videos: [],
                    articles: [],
                    worksheets: [],
                    quizzes: [{
                        id: 1,
                        title: { en: "New Quiz", zh: "新测验" },
                        questions: []
                    }]
                });
                
                this.closeModal('addUnitModal');
                this.render();
                
                alert(this.t({ en: 'Unit added successfully!', zh: '单元添加成功！' }));
            }
            
            showEditUnitModal(unitId) {
                const unit = this.units.find(u => u.id === unitId);
                document.getElementById('editUnitTitle').value = unit.title[this.language];
                document.getElementById('editUnitDescription').value = unit.description[this.language];
                this.currentUnitId = unitId;
                this.showModal('editUnitModal');
            }
            
            saveUnitChanges() {
                const unit = this.units.find(u => u.id === this.currentUnitId);
                const title = document.getElementById('editUnitTitle').value;
                const description = document.getElementById('editUnitDescription').value;
                
                if (!title || !description) {
                    alert(this.t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
                    return;
                }
                
                unit.title[this.language] = title;
                unit.description[this.language] = description;
                
                this.closeModal('editUnitModal');
                this.render();
                
                alert(this.t({ en: 'Unit updated successfully!', zh: '单元更新成功！' }));
            }
            
            deleteUnit(unitId) {
                const unit = this.units.find(u => u.id === unitId);
                if (confirm(`${this.t({ en: 'Are you sure you want to delete', zh: '确定要删除' })} ${unit.title[this.language]}?`)) {
                    this.units = this.units.filter(u => u.id !== unitId);
                    this.render();
                    alert(this.t({ en: 'Unit deleted successfully!', zh: '单元删除成功！' }));
                }
            }
        }

        // Initialize the app when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            window.app = new App();
        });
    </script>
</body>
</html>