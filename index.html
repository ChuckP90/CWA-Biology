import React, { useState, useEffect } from 'react';

const App = () => {
  const [user, setUser] = useState(null);
  const [language, setLanguage] = useState('en');
  const [currentPage, setCurrentPage] = useState('home');
  const [currentUnitId, setCurrentUnitId] = useState(null);
  const [currentWorksheetId, setCurrentWorksheetId] = useState(null);
  const [currentClassId, setCurrentClassId] = useState(null);
  const [currentContentTab, setCurrentContentTab] = useState('videos');
  const [quizResponses, setQuizResponses] = useState({});
  const [menuOpen, setMenuOpen] = useState(false);
  const [editUnitData, setEditUnitData] = useState(null);
  const [addUnitData, setAddUnitData] = useState(null);
  const [showQuizModal, setShowQuizModal] = useState(false);
  const [showWorksheetModal, setShowWorksheetModal] = useState(false);
  const [showClassMaterialsModal, setShowClassMaterialsModal] = useState(false);
  const [showAnnouncementModal, setShowAnnouncementModal] = useState(false);
  const [showContentManagementModal, setShowContentManagementModal] = useState(false);
  const [showEditUnitModal, setShowEditUnitModal] = useState(false);
  const [showAddUnitModal, setShowAddUnitModal] = useState(false);
  const [currentSlide, setCurrentSlide] = useState(0);
  const [galleryInterval, setGalleryInterval] = useState(null);

  // Your actual images
  const images = [
    "https://image2url.com/images/1756192024345-f9e28db4-2b09-4491-8922-12b7a732ea2c.jpg",  // Student writing notes in lab
    "https://image2url.com/images/1756192080161-efb75f1e-bdf8-4114-9298-2637f5b805aa.jpg",  // Student using microscope
    "https://image2url.com/images/1756192104012-7cd1420e-c891-4ecd-91a9-ec8f861c4dd5.jpg",  // Students working on group project
    "https://image2url.com/images/1756192128274-d3e37b71-d0f1-4843-9309-44c5e0679293.jpg",  // Microscope view of cells
    "https://image2url.com/images/1756192152148-4eb1318a-4302-4491-869a-f75dc8589d97.jpg",  // Students working with microscope
    "https://image2url.com/images/1756192171902-114bce4a-a2de-47ff-b724-f1aff2d421fe.jpg",  // Student holding test tube
    "https://image2url.com/images/1756192442681-6bea910d-e4b3-4e32-8d17-8922fa0ad21f.jpg"   // Students discussing experiment
  ];

  const [units, setUnits] = useState([
    {
      id: 1,
      title: { en: "Cell Biology", zh: "细胞生物学" },
      description: {
        en: "Learn about the basic unit of life: the cell.",
        zh: "了解生命的基本单位：细胞。",
      },
      videos: [
        {
          id: 1,
          title: { en: "Introduction to Cells", zh: "细胞介绍" },
          url: "https://placehold.co/800x450?text=Cell+Biology+Video",
          level: "beginner",
        },
      ],
      articles: [
        {
          id: 1,
          title: { en: "What is a Cell?", zh: "什么是细胞？" },
          content: {
            en: "A cell is the smallest unit of life...",
            zh: "细胞是生命的基本单位...",
          },
          level: "beginner",
        },
      ],
      worksheets: [
        {
          id: 1,
          title: { en: "Cell Structure Worksheet", zh: "细胞结构练习题" },
          url: "#",
        },
      ],
      quizzes: [
        {
          id: 1,
          title: { en: "Cell Basics Quiz", zh: "细胞基础知识测验" },
          questions: [
            {
              id: 1,
              text: { en: "What is the control center of the cell?", zh: "细胞的控制中心是什么？" },
              options: [
                { id: "a", text: { en: "Mitochondria", zh: "线粒体" } },
                { id: "b", text: { en: "Nucleus", zh: "细胞核" } },
                { id: "c", text: { en: "Ribosome", zh: "核糖体" } },
                { id: "d", text: { en: "Lysosome", zh: "溶酶体" } },
              ],
              correct: "b",
            },
            {
              id: 2,
              text: { en: "Which organelle produces energy for the cell?", zh: "哪个细胞器为细胞产生能量？" },
              options: [
                { id: "a", text: { en: "Nucleus", zh: "细胞核" } },
                { id: "b", text: { en: "Mitochondria", zh: "线粒体" } },
                { id: "c", text: { en: "Golgi Apparatus", zh: "高尔基体" } },
                { id: "d", text: { en: "Endoplasmic Reticulum", zh: "内质网" } },
              ],
              correct: "b",
            },
          ],
        },
      ],
    },
    {
      id: 2,
      title: { en: "Genetics", zh: "遗传学" },
      description: {
        en: "Explore the science of heredity and variation.",
        zh: "探索遗传和变异的科学。",
      },
      videos: [
        {
          id: 2,
          title: { en: "DNA and Genes", zh: "DNA和基因" },
          url: "https://placehold.co/800x450?text=Genetics+Video",
          level: "beginner",
        },
      ],
      articles: [
        {
          id: 4,
          title: { en: "Basics of DNA", zh: "DNA基础" },
          content: {
            en: "DNA is a molecule that carries genetic information...",
            zh: "DNA是携带遗传信息的分子...",
          },
          level: "beginner",
        },
      ],
      worksheets: [
        {
          id: 2,
          title: { en: "Punnett Square Practice", zh: "庞尼特方格练习" },
          url: "#",
        },
      ],
      quizzes: [
        {
          id: 2,
          title: { en: "Genetics Quiz", zh: "遗传学测验" },
          questions: [
            {
              id: 1,
              text: { en: "What does DNA stand for?", zh: "DNA代表什么？" },
              options: [
                { id: "a", text: { en: "Deoxyribonucleic Acid", zh: "脱氧核糖核酸" } },
                { id: "b", text: { en: "Dynamic Nuclear Array", zh: "动态核阵列" } },
                { id: "c", text: { en: "Double Nitrogen Atom", zh: "双氮原子" } },
                { id: "d", text: { en: "Dense Nuclear Acid", zh: "密集核酸" } },
              ],
              correct: "a",
            },
          ],
        },
      ],
    },
  ]);

  const [classes, setClasses] = useState([
    {
      id: 1,
      name: { en: "Grade 10 Biology A", zh: "10年级生物A班" },
      teacher: "Ms. Smith",
      code: "BIO10A",
      students: [],
      tasks: [
        {
          id: 1,
          title: { en: "Cell Diagram Assignment", zh: "细胞图作业" },
          dueDate: "2023-12-15",
          type: "assignment",
        },
      ],
      materials: [
        { id: 1, name: { en: "Cell Biology Notes", zh: "细胞生物学笔记" }, type: "pdf", size: "2.5 MB" },
        { id: 2, name: { en: "Genetics Study Guide", zh: "遗传学学习指南" }, type: "pdf", size: "3.1 MB" },
        { id: 3, name: { en: "Lab Safety Procedures", zh: "实验室安全规程" }, type: "pdf", size: "1.8 MB" },
      ],
      announcements: [
        { id: 1, title: { en: "Midterm Exam Schedule", zh: "期中考试安排" }, date: "2023-11-15", content: { en: "The midterm exam will be on December 1st. Please review all units covered so far.", zh: "期中考试将在12月1日举行。请复习到目前为止所学的所有单元。" } },
        { id: 2, title: { en: "Lab Session Reminder", zh: "实验课提醒" }, date: "2023-11-10", content: { en: "Don't forget to bring your lab coat and safety goggles for tomorrow's session.", zh: "别忘了明天的实验课要带上实验服和护目镜。" } },
      ],
    },
  ]);

  // Start gallery auto rotation
  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentSlide(prev => (prev + 1) % images.length);
    }, 5000);
    
    setGalleryInterval(interval);
    
    return () => clearInterval(interval);
  }, []);

  // Navigation functions
  const navigateTo = (page) => {
    setCurrentPage(page);
    setMenuOpen(false);
  };

  // Login function
  const login = (email, password) => {
    // Use your real email address
    if (email === "cpalmer@cwacs.cn" && password === "CWA2025BIO") {
      setUser({ role: "admin", email, name: "Chagri (Chuck) Palmer" });
      setCurrentPage('home');
      return true;
    }
    
    if (email.includes("teacher")) {
      setUser({ 
        role: "teacher", 
        email, 
        name: email.split("@")[0].replace("teacher", "Teacher ") 
      });
      setCurrentPage('home');
      return true;
    }
    
    setUser({ 
      role: "student", 
      email, 
      name: email.split("@")[0].replace("student", "Student ") 
    });
    setCurrentPage('home');
    return true;
  };

  // Logout function
  const logout = () => {
    setUser(null);
    setCurrentPage('home');
  };

  // Toggle language
  const toggleLanguage = () => {
    setLanguage(prev => prev === 'en' ? 'zh' : 'en');
  };

  // Translation function
  const t = (obj) => {
    return obj[language] || obj.en;
  };

  // Menu toggle
  const toggleMenu = () => {
    setMenuOpen(!menuOpen);
  };

  // Close menu when clicking outside
  useEffect(() => {
    const handleClickOutside = (event) => {
      const menuButton = document.querySelector('.menu-button');
      const menuOverlay = document.querySelector('.menu-overlay');
      
      if (menuOverlay && menuButton && !menuButton.contains(event.target) && !menuOverlay.contains(event.target)) {
        setMenuOpen(false);
      }
    };

    document.addEventListener('click', handleClickOutside);
    return () => document.removeEventListener('click', handleClickOutside);
  }, []);

  // Gallery navigation
  const nextSlide = () => {
    setCurrentSlide(prev => (prev + 1) % images.length);
    if (galleryInterval) {
      clearInterval(galleryInterval);
      setGalleryInterval(setInterval(() => {
        setCurrentSlide(prev => (prev + 1) % images.length);
      }, 5000));
    }
  };

  const prevSlide = () => {
    setCurrentSlide(prev => (prev - 1 + images.length) % images.length);
    if (galleryInterval) {
      clearInterval(galleryInterval);
      setGalleryInterval(setInterval(() => {
        setCurrentSlide(prev => (prev + 1) % images.length);
      }, 5000));
    }
  };

  // Quiz functions
  const startQuiz = (unitId) => {
    setCurrentUnitId(unitId);
    setShowQuizModal(true);
  };

  const recordQuizAnswer = (questionId, answer) => {
    setQuizResponses(prev => ({ ...prev, [questionId]: answer }));
  };

  const submitQuiz = () => {
    const unit = units.find(u => u.id === currentUnitId);
    const quiz = unit.quizzes[0];
    
    let correct = 0;
    let total = quiz.questions.length;
    
    quiz.questions.forEach(question => {
      if (quizResponses[question.id] === question.correct) {
        correct++;
      }
    });
    
    const score = Math.round((correct / total) * 100);
    alert(`${t({ en: 'Quiz completed! Your score:', zh: '测验完成！您的分数：' })} ${score}% (${correct}/${total})`);
    
    setShowQuizModal(false);
    setQuizResponses({});
  };

  // Worksheet functions
  const downloadWorksheet = (worksheetId) => {
    setCurrentWorksheetId(worksheetId);
    setShowWorksheetModal(true);
  };

  const confirmDownload = () => {
    const worksheet = units.flatMap(u => u.worksheets).find(w => w.id === currentWorksheetId);
    alert(`${t({ en: 'Downloading', zh: '下载' })} ${worksheet.title[language]}`);
    setShowWorksheetModal(false);
  };

  // Class functions
  const viewClassMaterials = (classId) => {
    setCurrentClassId(classId);
    setShowClassMaterialsModal(true);
  };

  const viewAnnouncements = (classId) => {
    setCurrentClassId(classId);
    setShowAnnouncementModal(true);
  };

  // Admin functions
  const showContentManagementModal = (unitId) => {
    setCurrentUnitId(unitId);
    setCurrentContentTab('videos');
    setShowContentManagementModal(true);
  };

  const switchContentTab = (tab) => {
    setCurrentContentTab(tab);
  };

  // Unit management
  const showEditUnitModal = (unitId) => {
    const unit = units.find(u => u.id === unitId);
    setEditUnitData({
      id: unit.id,
      title: unit.title[language],
      description: unit.description[language]
    });
    setShowEditUnitModal(true);
  };

  const saveUnitChanges = () => {
    if (!editUnitData.title || !editUnitData.description) {
      alert(t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
      return;
    }
    
    setUnits(prev => prev.map(unit => 
      unit.id === editUnitData.id 
        ? { 
            ...unit, 
            title: { ...unit.title, [language]: editUnitData.title },
            description: { ...unit.description, [language]: editUnitData.description }
          }
        : unit
    ));
    
    setShowEditUnitModal(false);
    alert(t({ en: 'Unit updated successfully!', zh: '单元更新成功！' }));
  };

  const showAddUnitModal = () => {
    setAddUnitData({ title: '', description: '' });
    setShowAddUnitModal(true);
  };

  const addUnit = () => {
    if (!addUnitData.title || !addUnitData.description) {
      alert(t({ en: 'Please fill in all fields', zh: '请填写所有字段' }));
      return;
    }
    
    const newId = Math.max(...units.map(u => u.id)) + 1;
    setUnits(prev => [...prev, {
      id: newId,
      title: { en: addUnitData.title, zh: addUnitData.title },
      description: { en: addUnitData.description, zh: addUnitData.description },
      videos: [],
      articles: [],
      worksheets: [],
      quizzes: [{
        id: 1,
        title: { en: "New Quiz", zh: "新测验" },
        questions: []
      }]
    }]);
    
    setShowAddUnitModal(false);
    alert(t({ en: 'Unit added successfully!', zh: '单元添加成功！' }));
  };

  const deleteUnit = (unitId) => {
    const unit = units.find(u => u.id === unitId);
    if (window.confirm(`${t({ en: 'Are you sure you want to delete', zh: '确定要删除' })} ${unit.title[language]}?`)) {
      setUnits(prev => prev.filter(u => u.id !== unitId));
      alert(t({ en: 'Unit deleted successfully!', zh: '单元删除成功！' }));
    }
  };

  // Render functions
  const HomePage = () => (
    <div>
      <section className="bg-gradient-to-br from-green-50 to-blue-50 py-20">
        <div className="container mx-auto px-4">
          <div className="flex flex-col lg:flex-row items-center">
            <div className="lg:w-1/2 mb-10 lg:mb-0">
              <h2 className="text-4xl lg:text-5xl font-bold text-gray-800 mb-6 leading-tight">
                {t({ en: "Master Biology with", zh: "掌握生物学" })}
                <span className="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600"> CWA-Biology</span>
              </h2>
              <p className="text-xl text-gray-600 mb-8 leading-relaxed">
                {t({ 
                  en: "Interactive learning platform for students and teachers. Access comprehensive resources, track progress, and excel in biology.", 
                  zh: "学生和教师的互动学习平台。访问全面的资源，跟踪进度，并在生物学上取得优异成绩。"
                })}
              </p>
              <div className="flex flex-wrap gap-4">
                <button 
                  className="btn-primary text-white px-8 py-3 rounded-full text-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
                  onClick={() => navigateTo('library')}
                >
                  {t({ en: "Get Started", zh: "开始学习" })}
                </button>
                <button 
                  className="btn-secondary text-green-600 px-8 py-3 rounded-full text-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
                  onClick={() => navigateTo('library')}
                >
                  {t({ en: "Learn More", zh: "了解更多" })}
                </button>
              </div>
            </div>
            <div className="lg:w-1/2">
              <div className="image-gallery relative rounded-xl overflow-hidden h-96">
                {images.map((img, index) => (
                  <img 
                    key={index}
                    src={img}
                    alt="Biology Learning"
                    className={`absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-500 ${index === currentSlide ? 'opacity-100' : 'opacity-0'}`}
                  />
                ))}
                <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                  {images.map((_, index) => (
                    <div 
                      key={index}
                      className={`w-3 h-3 rounded-full ${index === currentSlide ? 'bg-white' : 'bg-white bg-opacity-50'}`}
                    ></div>
                  ))}
                </div>
                <button 
                  className="absolute top-1/2 left-4 transform -translate-y-1/2 bg-white bg-opacity-70 hover:bg-opacity-90 rounded-full p-2 transition-all"
                  onClick={prevSlide}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                  </svg>
                </button>
                <button 
                  className="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white bg-opacity-70 hover:bg-opacity-90 rounded-full p-2 transition-all"
                  onClick={nextSlide}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <section className="py-20 bg-gray-50">
        <div className="container mx-auto px-4">
          <div className="text-center mb-16">
            <h2 className="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
              {t({ en: "Key Features", zh: "主要功能" })}
            </h2>
            <p className="text-xl text-gray-600 max-w-3xl mx-auto">
              {t({ 
                en: "Everything you need to succeed in secondary school biology, all in one platform.", 
                zh: "中学生物学所需的一切，尽在这一平台。"
              })}
            </p>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
              <div className="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-gray-800 mb-3">{t({ en: "Comprehensive Library", zh: "综合资料库" })}</h3>
              <p className="text-gray-600 leading-relaxed">{t({ 
                en: "Access all biology units with videos, articles at beginner, intermediate, and original levels.", 
                zh: "访问所有生物学单元，包含初、中、高级水平的视频和文章。"
              })}</p>
              <button 
                className="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200"
                onClick={() => navigateTo('library')}
              >
                {t({ en: "Explore", zh: "探索" })}
              </button>
            </div>
            
            <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
              <div className="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-gray-800 mb-3">{t({ en: "Interactive Quizzes", zh: "互动测验" })}</h3>
              <p className="text-gray-600 leading-relaxed">{t({ 
                en: "Test your knowledge with unit-based quizzes and track your progress over time.", 
                zh: "通过单元测验测试您的知识，并跟踪您的学习进度。"
              })}</p>
              <button 
                className="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200"
                onClick={() => navigateTo('quizzes')}
              >
                {t({ en: "Take Quiz", zh: "参加测验" })}
              </button>
            </div>
            
            <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
              <div className="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-gray-800 mb-3">{t({ en: "Practice Worksheets", zh: "练习题" })}</h3>
              <p className="text-gray-600 leading-relaxed">{t({ 
                en: "Downloadable worksheets for each unit to reinforce your understanding.", 
                zh: "每个单元的可下载练习题，巩固您的理解。"
              })}</p>
              <button 
                className="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200"
                onClick={() => navigateTo('worksheets')}
              >
                {t({ en: "Download", zh: "下载" })}
              </button>
            </div>
            
            <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
              <div className="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.879-1.13M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-gray-800 mb-3">{t({ en: "Class Management", zh: "班级管理" })}</h3>
              <p className="text-gray-600 leading-relaxed">{t({ 
                en: "Join classes, complete assignments, and interact with teachers and peers.", 
                zh: "加入班级，完成作业，与老师和同学互动。"
              })}</p>
              <button 
                className="mt-4 w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200"
                onClick={() => navigateTo('classes')}
              >
                {t({ en: "Join Class", zh: "加入班级" })}
              </button>
            </div>
          </div>
        </div>
      </section>
      
      <section className="py-20 bg-white">
        <div className="container mx-auto px-4">
          <div className="text-center mb-16">
            <h2 className="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
              {t({ en: "Biology Units", zh: "生物学单元" })}
            </h2>
            <p className="text-xl text-gray-600">
              {t({ 
                en: "Explore our comprehensive biology curriculum", 
                zh: "探索我们全面的生物学课程"
              })}
            </p>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {units.map(unit => (
              <div key={unit.id} className="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition duration-300 transform hover:-translate-y-1">
                <img 
                  src={`https://placehold.co/300x200?text=${encodeURIComponent(unit.title[language])}`} 
                  alt={unit.title[language]} 
                  className="w-full h-48 object-cover"
                />
                <div className="p-6">
                  <h3 className="text-xl font-semibold text-gray-800 mb-2">{unit.title[language]}</h3>
                  <p className="text-gray-600 mb-4 text-sm leading-relaxed">{unit.description[language]}</p>
                  <div className="flex flex-wrap gap-2 mb-4">
                    <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">
                      {unit.videos.length} {t({ en: "Videos", zh: "视频" })}
                    </span>
                    <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium">
                      {unit.articles.length} {t({ en: "Articles", zh: "文章" })}
                    </span>
                    <span className="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium">
                      {unit.quizzes.length} {t({ en: "Quizzes", zh: "测验" })}
                    </span>
                  </div>
                  <button 
                    onClick={() => navigateTo('library')}
                    className="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-200"
                  >
                    {t({ en: "Explore Unit", zh: "探索单元" })}
                  </button>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
      
      <section className="py-20 bg-gray-50">
        <div className="container mx-auto px-4">
          <div className="text-center mb-16">
            <h2 className="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
              {t({ en: "Available Classes", zh: "可用班级" })}
            </h2>
            <p className="text-xl text-gray-600">
              {t({ 
                en: "Join classes to learn with teachers and peers", 
                zh: "加入班级，与老师和同学一起学习"
              })}
            </p>
          </div>
          
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {classes.map(classObj => (
              <div key={classObj.id} className="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition duration-300">
                <div className="flex justify-between items-start mb-4">
                  <div>
                    <h3 className="text-xl font-semibold text-gray-800">{classObj.name[language]}</h3>
                    <p className="text-gray-600">{t({ en: "Teacher", zh: "教师" })}: {classObj.teacher}</p>
                  </div>
                  <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                    {classObj.code}
                  </span>
                </div>
                
                <div className="mb-4">
                  <h4 className="font-semibold text-gray-700 mb-2">
                    {t({ en: "Upcoming Tasks", zh: "即将到期的任务" })}
                  </h4>
                  {classObj.tasks.length > 0 ? (
                    <ul className="space-y-2">
                      {classObj.tasks.map(task => (
                        <li key={task.id} className="text-sm text-gray-600 flex justify-between">
                          <span>{task.title[language]}</span>
                          <span className="text-green-600 font-medium">{task.dueDate}</span>
                        </li>
                      ))}
                    </ul>
                  ) : (
                    <p className="text-sm text-gray-500 italic">
                      {t({ en: "No upcoming tasks", zh: "暂无即将到期的任务" })}
                    </p>
                  )}
                </div>
                
                <button 
                  onClick={() => viewClassMaterials(classObj.id)}
                  className="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-semibold transition duration-200"
                >
                  {t({ en: "View Materials", zh: "查看资料" })}
                </button>
              </div>
            ))}
          </div>
        </div>
      </section>
    </div>
  );

  const LoginPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4">
      <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
        <div className="text-center mb-8">
          <div className="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
            </svg>
          </div>
          <h2 className="text-2xl font-bold text-gray-800">Login to CWA-Biology</h2>
          <p className="text-gray-600 mt-2">Welcome back to your learning journey</p>
        </div>
        
        <form className="space-y-6">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Email Address
            </label>
            <input
              type="email"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="your@email.com"
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Password
            </label>
            <input
              type="password"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="••••••••"
            />
          </div>
          
          <div className="flex items-center justify-between">
            <label className="flex items-center">
              <input type="checkbox" className="rounded border-gray-300 text-green-500 focus:ring-green-500" />
              <span className="ml-2 text-sm text-gray-600">Remember me</span>
            </label>
            <a href="#" className="text-sm text-green-600 hover:text-green-500">
              Forgot password?
            </a>
          </div>
          
          <button
            type="button"
            className="w-full btn-primary text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
            onClick={() => {
              // In a real app, you would validate credentials here
              login("student@example.com", "password");
            }}
          >
            Login
          </button>
        </form>
        
        <div className="mt-6 text-center">
          <p className="text-gray-600">
            Don't have an account?{' '}
            <a href="#" onClick={() => navigateTo('register')} className="text-green-600 hover:text-green-500 font-medium">
              Register now
            </a>
          </p>
        </div>
      </div>
    </div>
  );

  const RegisterPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4">
      <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
        <div className="text-center mb-8">
          <div className="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
            </svg>
          </div>
          <h2 className="text-2xl font-bold text-gray-800">Create Account</h2>
          <p className="text-gray-600 mt-2">Join CWA-Biology today</p>
        </div>
        
        <form className="space-y-6">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              I am a
            </label>
            <div className="grid grid-cols-2 gap-2">
              <button
                type="button"
                className="py-2 px-4 rounded-lg text-sm font-medium transition duration-200 bg-green-100 text-green-800"
                onClick={() => document.getElementById('role').value = 'student'}
              >
                Student
              </button>
              <button
                type="button"
                className="py-2 px-4 rounded-lg text-sm font-medium transition duration-200 bg-green-100 text-green-800"
                onClick={() => document.getElementById('role').value = 'teacher'}
              >
                Teacher
              </button>
            </div>
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Full Name *
            </label>
            <input
              type="text"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="John Doe"
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Email Address *
            </label>
            <input
              type="email"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="your@email.com"
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Password *
            </label>
            <input
              type="password"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="••••••••"
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Confirm Password *
            </label>
            <input
              type="password"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="••••••••"
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Class Code (if applicable)
            </label>
            <input
              type="text"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="BIO10A"
            />
          </div>
          
          <button
            type="button"
            className="w-full btn-primary text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
            onClick={() => {
              alert(t({ en: 'Registration successful! Please login with your credentials.', zh: '注册成功！请使用您的凭据登录。' }));
              login("student@example.com", "password");
            }}
          >
            Register
          </button>
        </form>
        
        <div className="mt-6 text-center">
          <p className="text-gray-600">
            {t({ en: "Already have an account?", zh: "已有账户？" })}{' '}
            <a href="#" onClick={() => navigateTo('login')} className="text-green-600 hover:text-green-500 font-medium">
              {t({ en: "Login here", zh: "立即登录" })}
            </a>
          </p>
        </div>
      </div>
    </div>
  );

  const AdminPage = () => (
    <div className="min-h-screen bg-gray-100 fade-in">
      <div className="bg-white shadow">
        <div className="container mx-auto px-4">
          <div className="flex space-x-1 py-4">
            <button 
              onClick={() => navigateTo('admin')}
              className={`py-2 px-4 rounded-lg text-sm font-medium transition duration-200 ${currentPage === 'admin' ? 'bg-blue-100 text-blue-800' : 'hover:bg-gray-100'}`}
            >
              {t({ en: "Units", zh: "单元" })}
            </button>
            <button 
              onClick={() => showContentManagementModal(1)}
              className={`py-2 px-4 rounded-lg text-sm font-medium transition duration-200 hover:bg-gray-100`}
            >
              {t({ en: "Content", zh: "内容" })}
            </button>
            <button 
              onClick={() => alert(t({ en: 'User Management', zh: '用户管理' }))}
              className={`py-2 px-4 rounded-lg text-sm font-medium transition duration-200 hover:bg-gray-100`}
            >
              {t({ en: "Users", zh: "用户" })}
            </button>
            <button 
              onClick={() => alert(t({ en: 'Analytics Dashboard', zh: '分析仪表板' }))}
              className={`py-2 px-4 rounded-lg text-sm font-medium transition duration-200 hover:bg-gray-100`}
            >
              {t({ en: "Analytics", zh: "分析" })}
            </button>
          </div>
        </div>
      </div>
      
      <div className="container mx-auto px-4 py-8">
        <div className="bg-white rounded-xl shadow-lg p-8">
          <h1 className="text-3xl font-bold text-gray-800 mb-6">
            {t({ en: "Admin Dashboard", zh: "管理员仪表板" })}
          </h1>
          
          <div className="prose max-w-none">
            <h2 className="text-xl font-semibold text-gray-700 mb-4 capitalize">
              {t({ en: "Units Management", zh: "单元管理" })}
            </h2>
            <p className="text-gray-600 mb-4">
              {t({ en: "Welcome to the admin dashboard. From here, you can manage all aspects of the CWA-Biology platform.", zh: "欢迎来到管理员仪表板。在这里，您可以管理CWA-Biology平台的所有方面。" })}
            </p>
            
            <div className="space-y-4">
              <h3 className="text-lg font-medium text-gray-700">{t({ en: "Unit Management", zh: "单元管理" })}</h3>
              <p className="text-gray-600">{t({ en: "Create, edit, and delete biology units.", zh: "创建、编辑和删除生物学单元。" })}</p>
              <button 
                onClick={showAddUnitModal}
                className="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
              >
                {t({ en: "Add New Unit", zh: "添加新单元" })}
              </button>
            </div>
            
            <div className="mt-8 space-y-4">
              <h3 className="text-lg font-medium text-gray-700">{t({ en: "Current Units", zh: "当前单元" })}</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {units.map(unit => (
                  <div key={unit.id} className="border border-gray-200 rounded-lg p-4">
                    <div className="flex justify-between items-start">
                      <div>
                        <h4 className="font-semibold">{unit.title[language]}</h4>
                        <p className="text-sm text-gray-600">{unit.description[language]}</p>
                      </div>
                      <div className="flex space-x-2">
                        <button 
                          onClick={() => showEditUnitModal(unit.id)}
                          className="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
                        >
                          {t({ en: "Edit", zh: "编辑" })}
                        </button>
                        <button 
                          onClick={() => deleteUnit(unit.id)}
                          className="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm hover:shadow-lg transform hover:-translate-y-1 transition duration-200"
                        >
                          {t({ en: "Delete", zh: "删除" })}
                        </button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );

  // Render the current page
  const renderCurrentPage = () => {
    switch(currentPage) {
      case 'login':
        return <LoginPage />;
      case 'register':
        return <RegisterPage />;
      case 'admin':
        return <AdminPage />;
      case 'library':
        return <HomePage />;
      case 'quizzes':
        return <HomePage />;
      case 'worksheets':
        return <HomePage />;
      case 'classes':
        return <HomePage />;
      default:
        return <HomePage />;
    }
  };

  return (
    <div className="bg-gray-50 font-sans min-h-screen">
      {/* Header */}
      <header className="bg-gradient-to-r from-green-600 to-blue-600 text-white shadow-lg sticky top-0 z-50">
        <div className="container mx-auto px-4 py-4 flex flex-wrap items-center justify-between">
          {/* Back Button */}
          {currentPage !== 'home' && (
            <button 
              onClick={() => navigateTo('home')}
              className="back-button"
            >
              <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
              </svg>
            </button>
          )}
          
          <div className="flex items-center space-x-2">
            <div className="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.69-1-2.222a4.02 4.02 0 01-.658-.457 5 5 0 01-7.07-7.07 4.02 4.02 0 01-.457-.658C3.31 6.31 2.515 5.954 1.62 6a2 2 0 11-1.066-3.824 4.02 4.02 0 01.457-.658 5 5 0 017.07-7.07 4.022 4.022 0 012.222-1c.895 0 1.69.356 2.222 1.001a5 5 0 110 9.998z" />
              </svg>
            </div>
            <h1 className="text-2xl font-bold">CWA-Biology</h1>
          </div>
          
          <div className="flex items-center space-x-2 mt-2 lg:mt-0">
            <div className="flex items-center space-x-2">
              <button 
                onClick={toggleLanguage}
                className="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded-full text-sm transition duration-200"
              >
                {language === "en" ? "中文" : "EN"}
              </button>
              
              <div className="flex items-center space-x-2">
                {user ? (
                  <div className="flex items-center space-x-3">
                    <span className="text-sm">{user.name} ({user.role})</span>
                    <button 
                      onClick={logout}
                      className="bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition duration-200"
                    >
                      {t({ en: "Logout", zh: "登出" })}
                    </button>
                  </div>
                ) : (
                  <div className="flex space-x-2">
                    <button 
                      onClick={() => navigateTo('login')} 
                      className="bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded text-sm transition duration-200"
                    >
                      {t({ en: "Login", zh: "登录" })}
                    </button>
                    <button 
                      onClick={() => navigateTo('register')} 
                      className="bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm transition duration-200"
                    >
                      {t({ en: "Register", zh: "注册" })}
                    </button>
                  </div>
                )}
                
                {user?.role === 'admin' && (
                  <button 
                    onClick={() => navigateTo('admin')} 
                    className="bg-gradient-to-r from-purple-500 to-red-500 text-white px-3 py-1 rounded text-sm font-semibold transition duration-200"
                  >
                    {t({ en: "Admin", zh: "管理员" })}
                  </button>
                )}
              </div>
            </div>
          </div>
          
          {/* Navigation */}
          <div className="flex items-center space-x-2 mt-2 lg:mt-0">
            <div className="flex items-center space-x-2">
              <button 
                onClick={() => navigateTo('home')} 
                className={`nav-link ${currentPage === 'home' ? 'bg-white bg-opacity-40 transform -translate-y-2' : 'bg-white bg-opacity-20'}`}
              >
                {t({ en: "Home", zh: "首页" })}
              </button>
              
              {/* Menu Button right next to Home */}
              <button 
                onClick={toggleMenu}
                className={`nav-link menu-button ${menuOpen ? 'bg-white bg-opacity-40 transform -translate-y-2' : 'bg-white bg-opacity-20'}`}
              >
                {t({ en: "Menu", zh: "菜单" })}
              </button>
              
              {user && (
                <>
                  <button 
                    onClick={() => navigateTo('library')} 
                    className={`nav-link ${currentPage === 'library' ? 'bg-white bg-opacity-40 transform -translate-y-2' : 'bg-white bg-opacity-20'}`}
                  >
                    {t({ en: "Library", zh: "资料库" })}
                  </button>
                  <button 
                    onClick={() => navigateTo('quizzes')} 
                    className={`nav-link ${currentPage === 'quizzes' ? 'bg-white bg-opacity-40 transform -translate-y-2' : 'bg-white bg-opacity-20'}`}
                  >
                    {t({ en: "Quizzes", zh: "测验" })}
                  </button>
                  <button 
                    onClick={() => navigateTo('worksheets')} 
                    className={`nav-link ${currentPage === 'worksheets' ? 'bg-white bg-opacity-40 transform -translate-y-2' : 'bg-white bg-opacity-20'}`}
                  >
                    {t({ en: "Worksheets", zh: "练习题" })}
                  </button>
                  <button 
                    onClick={() => navigateTo('classes')} 
                    className={`nav-link ${currentPage === 'classes' ? 'bg-white bg-opacity-40 transform -translate-y-2' : 'bg-white bg-opacity-20'}`}
                  >
                    {t({ en: "Classes", zh: "班级" })}
                  </button>
                </>
              )}
            </div>
          </div>
        </div>
      </header>
      
      {/* Menu Overlay */}
      {menuOpen && (
        <div className="menu-overlay fixed top-16 right-4 z-50">
          <div className="bg-white shadow-lg rounded-lg p-4 min-w-48">
            <div className="flex flex-col space-y-2">
              <div 
                onClick={() => navigateTo('home')}
                className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
              >
                {t({ en: "Home", zh: "首页" })}
              </div>
              <div 
                onClick={() => navigateTo('library')}
                className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
              >
                {t({ en: "Library", zh: "资料库" })}
              </div>
              <div 
                onClick={() => navigateTo('quizzes')}
                className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
              >
                {t({ en: "Quizzes", zh: "测验" })}
              </div>
              <div 
                onClick={() => navigateTo('worksheets')}
                className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
              >
                {t({ en: "Worksheets", zh: "练习题" })}
              </div>
              <div 
                onClick={() => navigateTo('classes')}
                className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
              >
                {t({ en: "Classes", zh: "班级" })}
              </div>
              {user && (
                <div 
                  onClick={() => navigateTo('admin')}
                  className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
                >
                  {t({ en: "Admin", zh: "管理员" })}
                </div>
              )}
              <div 
                onClick={logout}
                className="menu-item p-2 hover:bg-gray-100 rounded cursor-pointer"
              >
                {t({ en: "Logout", zh: "登出" })}
              </div>
            </div>
          </div>
        </div>
      )}
      
      {/* Main Content */}
      {renderCurrentPage()}
      
      {/* Footer */}
      <footer className="bg-gray-800 text-white py-12">
        <div className="container mx-auto px-4">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <div className="flex items-center space-x-2 mb-4">
                <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.69-1-2.222a4.02 4.02 0 01-.658-.457 5 5 0 01-7.07-7.07 4.02 4.02 0 01-.457-.658C3.31 6.31 2.515 5.954 1.62 6a2 2 0 11-1.066-3.824 4.02 4.02 0 01.457-.658 5 5 0 017.07-7.07 4.022 4.022 0 012.222-1c.895 0 1.69.356 2.222 1.001a5 5 0 110 9.998z" />
                  </svg>
                </div>
                <h3 className="text-xl font-bold">CWA-Biology</h3>
              </div>
              <p className="text-gray-300 leading-relaxed">
                {t({ 
                  en: "Empowering biology education through interactive learning and comprehensive resources.", 
                  zh: "通过互动学习和全面的资源，提升生物学教育。"
                })}
              </p>
            </div>
            
            <div>
              <h4 className="text-lg font-semibold mb-4">{t({ en: "Quick Links", zh: "快速链接" })}</h4>
              <ul className="space-y-2 text-gray-300">
                <li><a href="#" className="hover:text-white transition duration-200">Home</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">Library</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">Quizzes</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">Worksheets</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">Classes</a></li>
              </ul>
            </div>
            
            <div>
              <h4 className="text-lg font-semibold mb-4">{t({ en: "Resources", zh: "资源" })}</h4>
              <ul className="space-y-2 text-gray-300">
                <li><a href="#" className="hover:text-white transition duration-200">{t({ en: "Study Guides", zh: "学习指南" })}</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">{t({ en: "Video Tutorials", zh: "视频教程" })}</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">{t({ en: "Practice Tests", zh: "练习测试" })}</a></li>
                <li><a href="#" className="hover:text-white transition duration-200">{t({ en: "Teacher Resources", zh: "教师资源" })}</a></li>
              </ul>
            </div>
            
            <div>
              <h4 className="text-lg font-semibold mb-4">{t({ en: "Contact", zh: "联系" })}</h4>
              <div className="contact-info">
                <div className="contact-item flex items-center space-x-2 mb-2">
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                  <span>info.admissions@cwacs.cn</span>
                </div>
                <div className="contact-item flex items-center space-x-2 mb-2">
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                  </svg>
                  <span>0512-5298 2629 / 0512-5298 2628</span>
                </div>
                <div className="contact-item flex items-center space-x-2">
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                  <span>No.8, Yijia Road, Changshu, Jiangsu</span>
                </div>
              </div>
            </div>
          </div>
          
          <div className="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
            <p>&copy; 2025 CWA-Biology. {t({ en: "All rights reserved.", zh: "版权所有。" })}</p>
          </div>
        </div>
      </footer>
      
      {/* Modals */}
      {/* Quiz Modal */}
      {showQuizModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-2xl w-full mx-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-2xl font-bold">Quiz</h2>
              <button 
                onClick={() => setShowQuizModal(false)}
                className="text-gray-500 hover:text-gray-700 text-2xl"
              >
                &times;
              </button>
            </div>
            <div className="space-y-6">
              <h3 className="text-xl font-semibold">Cell Biology</h3>
              <p className="text-gray-600">Answer all questions to complete the quiz.</p>
              
              <div className="space-y-4">
                <div className="border p-4 rounded">
                  <h4 className="font-semibold mb-2">1. What is the control center of the cell?</h4>
                  <div className="space-y-2">
                    <label className="flex items-center space-x-2 p-2 hover:bg-gray-50 rounded">
                      <input 
                        type="radio" 
                        name="q1" 
                        value="a"
                        onChange={() => recordQuizAnswer(1, 'a')}
                        className="text-green-500"
                      />
                      <span>Mitochondria</span>
                    </label>
                    <label className="flex items-center space-x-2 p-2 hover:bg-gray-50 rounded">
                      <input 
                        type="radio" 
                        name="q1" 
                        value="b"
                        onChange={() => recordQuizAnswer(1, 'b')}
                        className="text-green-500"
                      />
                      <span>Nucleus</span>
                    </label>
                    <label className="flex items-center space-x-2 p-2 hover:bg-gray-50 rounded">
                      <input 
                        type="radio" 
                        name="q1" 
                        value="c"
                        onChange={() => recordQuizAnswer(1, 'c')}
                        className="text-green-500"
                      />
                      <span>Ribosome</span>
                    </label>
                    <label className="flex items-center space-x-2 p-2 hover:bg-gray-50 rounded">
                      <input 
                        type="radio" 
                        name="q1" 
                        value="d"
                        onChange={() => recordQuizAnswer(1, 'd')}
                        className="text-green-500"
                      />
                      <span>Lysosome</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div className="flex justify-end space-x-4 mt-6">
              <button 
                onClick={() => setShowQuizModal(false)}
                className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50"
              >
                Close
              </button>
              <button 
                onClick={submitQuiz}
                className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
              >
                Submit Quiz
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Worksheet Modal */}
      {showWorksheetModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div className="text-center py-8">
              <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <p className="text-lg mb-4">Your worksheet is ready to download!</p>
              <button 
                onClick={confirmDownload}
                className="btn-primary text-white px-6 py-2 rounded-lg font-semibold"
              >
                Download Now
              </button>
            </div>
            <div className="flex justify-end">
              <button 
                onClick={() => setShowWorksheetModal(false)}
                className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Class Materials Modal */}
      {showClassMaterialsModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-2xl w-full mx-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-2xl font-bold">Class Materials</h2>
              <button 
                onClick={() => setShowClassMaterialsModal(false)}
                className="text-gray-500 hover:text-gray-700 text-2xl"
              >
                &times;
              </button>
            </div>
            <div className="p-4">
              <p className="mb-4">Here are the materials for your class:</p>
              <ul className="space-y-2">
                {classes.find(c => c.id === currentClassId)?.materials.map(material => (
                  <li key={material.id} className="flex justify-between items-center p-2 bg-gray-50 rounded">
                    <span>{material.name[language]} ({material.size})</span>
                    <button 
                      onClick={() => {
                        alert(`${t({ en: 'Downloading', zh: '下载' })} ${material.name[language]}`);
                        setShowClassMaterialsModal(false);
                      }}
                      className="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm"
                    >
                      {t({ en: "Download", zh: "下载" })}
                    </button>
                  </li>
                ))}
              </ul>
            </div>
            <div className="flex justify-end">
              <button 
                onClick={() => setShowClassMaterialsModal(false)}
                className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Announcement Modal */}
      {showAnnouncementModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-2xl w-full mx-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-2xl font-bold">Class Announcements</h2>
              <button 
                onClick={() => setShowAnnouncementModal(false)}
                className="text-gray-500 hover:text-gray-700 text-2xl"
              >
                &times;
              </button>
            </div>
            <div className="p-4">
              <p className="mb-4">Latest announcements for your class:</p>
              <div className="space-y-4">
                {classes.find(c => c.id === currentClassId)?.announcements.map(announcement => (
                  <div key={announcement.id} className="border-l-4 border-blue-500 pl-4">
                    <h4 className="font-semibold">{announcement.title[language]}</h4>
                    <p className="text-sm text-gray-500">{announcement.date}</p>
                    <p className="mt-1">{announcement.content[language]}</p>
                  </div>
                ))}
              </div>
            </div>
            <div className="flex justify-end">
              <button 
                onClick={() => setShowAnnouncementModal(false)}
                className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Edit Unit Modal */}
      {showEditUnitModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-2xl font-bold">Edit Unit</h2>
              <button 
                onClick={() => setShowEditUnitModal(false)}
                className="text-gray-500 hover:text-gray-700 text-2xl"
              >
                &times;
              </button>
            </div>
            <form onSubmit={(e) => { e.preventDefault(); saveUnitChanges(); }}>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Unit Title
                  </label>
                  <input
                    type="text"
                    value={editUnitData?.title || ''}
                    onChange={(e) => setEditUnitData(prev => ({ ...prev, title: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md"
                    required
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Description
                  </label>
                  <textarea
                    value={editUnitData?.description || ''}
                    onChange={(e) => setEditUnitData(prev => ({ ...prev, description: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md"
                    rows="3"
                    required
                  ></textarea>
                </div>
              </div>
              <div className="flex justify-end space-x-4 mt-6">
                <button 
                  type="button"
                  onClick={() => setShowEditUnitModal(false)}
                  className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50"
                >
                  Cancel
                </button>
                <button 
                  type="submit"
                  className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
                >
                  Save Changes
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
      
      {/* Add Unit Modal */}
      {showAddUnitModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-2xl font-bold">Add New Unit</h2>
              <button 
                onClick={() => setShowAddUnitModal(false)}
                className="text-gray-500 hover:text-gray-700 text-2xl"
              >
                &times;
              </button>
            </div>
            <form onSubmit={(e) => { e.preventDefault(); addUnit(); }}>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Unit Title
                  </label>
                  <input
                    type="text"
                    value={addUnitData?.title || ''}
                    onChange={(e) => setAddUnitData(prev => ({ ...prev, title: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md"
                    required
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Description
                  </label>
                  <textarea
                    value={addUnitData?.description || ''}
                    onChange={(e) => setAddUnitData(prev => ({ ...prev, description: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md"
                    rows="3"
                    required
                  ></textarea>
                </div>
              </div>
              <div className="flex justify-end space-x-4 mt-6">
                <button 
                  type="button"
                  onClick={() => setShowAddUnitModal(false)}
                  className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50"
                >
                  Cancel
                </button>
                <button 
                  type="submit"
                  className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
                >
                  Add Unit
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default App;